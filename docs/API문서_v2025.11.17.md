# API ë¬¸ì„œ v1.2.0 ğŸ“¡
**Girls Band Tabi - RESTful API ê°€ì´ë“œ**

**ìµœì‹  ì—…ë°ì´íŠ¸**: 2025ë…„ 11ì›” 18ì¼  
**ë²„ì „**: v1.2.0  
**ìƒíƒœ**: âœ… ìµœì‹   
**Base URL**: `http://localhost:8080`  
**OpenAPI ìŠ¤í™**: `/api-docs`  
**Swagger UI**: `/swagger-ui.html`  

## ëª©ì°¨

1. [API ê°œìš” ë° ì„¤ê³„ ì›ì¹™](#api-ê°œìš”-ë°-ì„¤ê³„-ì›ì¹™)
2. [ì¸ì¦ ë° ì¸ê°€](#ì¸ì¦-ë°-ì¸ê°€)
3. [ì™„ì „í•œ ì—”ë“œí¬ì¸íŠ¸ ì°¸ì¡°](#ì™„ì „í•œ-ì—”ë“œí¬ì¸íŠ¸-ì°¸ì¡°)
4. [ìš”ì²­/ì‘ë‹µ í˜•ì‹](#ìš”ì²­ì‘ë‹µ-í˜•ì‹)
5. [ì˜¤ë¥˜ ì²˜ë¦¬ ë° RFC 7807](#ì˜¤ë¥˜-ì²˜ë¦¬-ë°-rfc-7807)
6. [ì†ë„ ì œí•œ ë° í˜ì´ì§€ë„¤ì´ì…˜](#ì†ë„-ì œí•œ-ë°-í˜ì´ì§€ë„¤ì´ì…˜)
7. [í•„í„°ë§ ë° ê²€ìƒ‰ ê¸°ëŠ¥](#í•„í„°ë§-ë°-ê²€ìƒ‰-ê¸°ëŠ¥)
8. [íŒŒì¼ ì—…ë¡œë“œ ë° ë¯¸ë””ì–´ ì²˜ë¦¬](#íŒŒì¼-ì—…ë¡œë“œ-ë°-ë¯¸ë””ì–´-ì²˜ë¦¬)
9. [OpenAPI/Swagger í†µí•©](#openapiswagger-í†µí•©)
10. [í…ŒìŠ¤íŠ¸ ì „ëµ ë° ë„êµ¬](#í…ŒìŠ¤íŠ¸-ì „ëµ-ë°-ë„êµ¬)

---

## API ê°œìš” ë° ì„¤ê³„ ì›ì¹™

### ì•„í‚¤í…ì²˜
Girls Band Tabi APIëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì•„í‚¤í…ì²˜ ì›ì¹™ì„ ë°”íƒ•ìœ¼ë¡œ **Spring Boot 3.x**ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤:

- **ê³„ì•½ ìš°ì„  ì„¤ê³„(Contract-First Design)**: OpenAPI 3.1 ì‚¬ì–‘ì´ API ê³„ì•½ì„ ì •ì˜
- **RESTful ì•„í‚¤í…ì²˜**: ëª…í™•í•œ ë¦¬ì†ŒìŠ¤ ì§€í–¥ URLì„ ê°€ì§„ REST ì›ì¹™ ì¤€ìˆ˜
- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¤€ë¹„**: ëª…í™•í•œ ëª¨ë“ˆ ê²½ê³„ë¥¼ ê°€ì§„ Spring Modulith
- **ë¦¬ì•¡í‹°ë¸Œ ì§€ì›**: í•„ìš”í•œ ê²½ìš° ë…¼ë¸”ë¡œí‚¹ ì‘ì—…ì„ ìœ„í•œ WebFlux
- **ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„**: ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„ë¥¼ ê°€ì§„ ê¸°ëŠ¥ ìš°ì„  ì¡°ì§

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

#### 1. ì¼ê´€ì„± ìš°ì„ 
- ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìœ„í•œ í‘œì¤€í™”ëœ `ApiResponse<T>` ë˜í¼
- RFC 7807 Problem Detailsë¥¼ ë”°ë¥´ëŠ” ì¼ê´€ëœ ì˜¤ë¥˜ í˜•ì‹
- í†µì¼ëœ ëª…ëª… ê·œì¹™ ë° URL íŒ¨í„´
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ HTTP ìƒíƒœ ì½”ë“œ ì‚¬ìš©

#### 2. ê°œë°œì ê²½í—˜
- ì˜ˆì œê°€ í¬í•¨ëœ í¬ê´„ì ì¸ OpenAPI ë¬¸ì„œ
- í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¸í„°ë™í‹°ë¸Œ Swagger UI
- ë³µêµ¬ ì§€ì¹¨ì´ ìˆëŠ” ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€
- ì¼ê´€ëœ í•„ë“œ ëª…ëª… ë° ë°ì´í„° íƒ€ì…

#### 3. ì„¤ê³„ë¶€í„° ë³´ì•ˆ
- ë¦¬í”„ë ˆì‹œ í† í° ë¡œí…Œì´ì…˜ì´ ìˆëŠ” JWT ê¸°ë°˜ ì¸ì¦
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´(RBAC)
- Redisë¥¼ í†µí•œ ì†ë„ ì œí•œ
- ì…ë ¥ ê²€ì¦ ë° ë¬´ê²°ì„± ê²€ì‚¬
- ë¯¼ê°í•œ ì‘ì—…ì— ëŒ€í•œ ê°ì‚¬ ë¡œê¹…

#### 4. ì„±ëŠ¥ ë° í™•ì¥ì„±
- ëŒ€ìš©ëŸ‰ ë°ì´í„°ì…‹ì„ ìœ„í•œ í˜ì´ì§€ë„¤ì´ì…˜
- êµ¬ì„± ê°€ëŠ¥í•œ TTLì„ ê°€ì§„ ìºì‹±
- ìœ ìµí•œ ê²½ìš° ë…¼ë¸”ë¡œí‚¹ I/O
- íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ ìµœì í™”
- ì—°ê²° í’€ë§ ë° ë¦¬ì†ŒìŠ¤ ê´€ë¦¬

#### 5. ê´€ì°°ê°€ëŠ¥ì„±
- ìƒê´€ê´€ê³„ IDë¥¼ ê°€ì§„ í¬ê´„ì ì¸ ë¡œê¹…
- Micrometerë¥¼ í†µí•œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- ìš”ì²­ ì¶”ì  ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- í—¬ìŠ¤ ì²´í¬ ë° ìƒíƒœ ì—”ë“œí¬ì¸íŠ¸

### API ë²„ì „ ê´€ë¦¬ ì „ëµ
- **URI ë²„ì „ë‹**: ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— `/api/v1/` ì ‘ë‘ì‚¬ ì‚¬ìš©
- **í›„ë°© í˜¸í™˜ì„±**: ë²„ì „ ë¹„í˜¸í™œ ì•Œë¦¼ì„ í¬í•¨í•œ ì‹œë§¨í‹± ë²„ì „ë‹
- **ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì›**: ë²„ì „ë³„ ë¬¸ì„œ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.x, Spring Security, Spring Data JPA
- **ë°ì´í„°ë² ì´ìŠ¤**: Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ê°€ì§„ PostgreSQL
- **ìºì‹±**: Lettuce ì»¤ë„¥í„°ë¥¼ ê°€ì§„ Redis
- **ì €ì¥ì†Œ**: ë¯¸ë””ì–´ íŒŒì¼ì„ ìœ„í•œ Cloudflare R2
- **ê´€ì°°ê°€ëŠ¥ì„±**: Micrometer, Prometheus, Actuator
- **ë¬¸ì„œ**: SpringDoc OpenAPI 3

---

## ì¸ì¦ ë° ì¸ê°€

### ê°œìš”
APIëŠ” ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°€ì§„ **JWT (JSON Web Token)** ê¸°ë°˜ ì¸ì¦ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- ë‹¨ê¸° ì§€ì† ì•¡ì„¸ìŠ¤ í† í°(15ë¶„)
- ë¡œí…Œì´ì…˜ì„ ê°€ì§„ ì¥ê¸° ì§€ì† ë¦¬í”„ë ˆì‹œ í† í°(7ì¼)
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´(RBAC)
- Redisë¥¼ í†µí•œ ì„¸ì…˜ ê´€ë¦¬
- ì„ íƒì  OAuth2 í†µí•©

### í† í° êµ¬ì¡°

#### ì•¡ì„¸ìŠ¤ í† í°
```json
{
  "sub": "550e8400-e29b-41d4-a716-446655440000",
  "iat": 1668240000,
  "exp": 1668241200,
  "iss": "girlsbandtabi",
  "aud": "girlsbandtabi-api",
  "type": "access",
  "roles": ["USER"]
}
```

#### ë¦¬í”„ë ˆì‹œ í† í°
```json
{
  "sub": "550e8400-e29b-41d4-a716-446655440000",
  "jti": "abc123-def456-ghi789",
  "iat": 1668240000,
  "exp": 1668844800,
  "iss": "girlsbandtabi",
  "type": "refresh"
}
```

### ì¸ì¦ í”Œë¡œìš°

#### 1. ì‚¬ìš©ì ë“±ë¡
```http
POST /api/v1/auth/register
Content-Type: application/json

{
  "username": "user@example.com",
  "nickname": "TravelUser",
  "password": "SecurePassword123!"
}
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "statusCode": 201,
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
  },
  "metadata": {
    "requestId": "req_1699804800_1234",
    "timestamp": "2024-11-12T10:00:00Z",
    "version": "v1"
  }
}
```

#### 2. ì‚¬ìš©ì ë¡œê·¸ì¸
```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "username": "user@example.com",
  "password": "SecurePassword123!"
}
```

#### 3. í† í° ìƒˆë¡œê³ ì¹¨
```http
POST /api/v1/auth/refresh
Content-Type: application/json

{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}
```

**ì‘ë‹µ:** ë¡œí…Œì´íŠ¸ëœ ë¦¬í”„ë ˆì‹œ í† í°ì„ í¬í•¨í•œ ìƒˆë¡œìš´ í† í° ìŒ

#### 4. ë¡œê·¸ì•„ì›ƒ
```http
POST /api/v1/auth/logout
Content-Type: application/json

{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}
```

### ì¸ê°€ í—¤ë”

#### Bearer í† í° ì¸ì¦
```http
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
```

#### ì„ íƒì‚¬í•­: ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦
```http
Cookie: ACCESS_TOKEN=eyJhbGciOiJIUzI1NiJ9...
```

### ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´

#### ì‚¬ìš©ì ì—­í• 
- **USER**: ê¸°ë³¸ ê¶Œí•œì„ ê°€ì§„ ì¼ë°˜ ì‚¬ìš©ì
- **ADMIN**: ì „ì²´ ì‹œìŠ¤í…œ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§„ ê´€ë¦¬ì
- **PROJECT_ADMIN**: í”„ë¡œì íŠ¸ë³„ ê´€ë¦¬ì ê¶Œí•œ

#### ê¶Œí•œ ì˜ˆì œ
```kotlin
@PreAuthorize("isAuthenticated()")                              // Any authenticated user
@PreAuthorize("hasRole('ADMIN')")                              // Global admin only
@PreAuthorize("hasRole('ADMIN') or @projectAuth.isProjectAdminById(#projectId)") // Admin or project admin
```

### ë³´ì•ˆ í—¤ë”
```http
X-Request-ID: req_1699804800_1234
X-Correlation-ID: trace_abc123
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1699804860
```

---

## ì™„ì „í•œ ì—”ë“œí¬ì¸íŠ¸ ì°¸ì¡°

### ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸

#### POST /api/v1/auth/register
ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì •ì„ ë“±ë¡í•©ë‹ˆë‹¤.

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "username": "user@example.com",
  "nickname": "TravelUser",
  "password": "SecurePassword123!"
}
```

**ê²€ì¦:**
- `username`: ìœ íš¨í•œ ì´ë©”ì¼ ì£¼ì†Œ (í•„ìˆ˜)
- `nickname`: ë¹„ì–´ìˆì§€ ì•Šì€ ë¬¸ìì—´ (í•„ìˆ˜)
- `password`: ë³µì¡ì„± ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ë¹„ì–´ìˆì§€ ì•Šì€ ë¬¸ìì—´ (í•„ìˆ˜)

**ì‘ë‹µ:** 201 Created with í† í° ìŒ

**ì˜¤ë¥˜ ì‚¬ë¡€:**
- 400: ê²€ì¦ ì‹¤íŒ¨
- 409: ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬

#### POST /api/v1/auth/login
ì‚¬ìš©ì ìê²© ì¦ëª…ì„ ì¸ì¦í•©ë‹ˆë‹¤.

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "username": "user@example.com",
  "password": "SecurePassword123!"
}
```

**ì‘ë‹µ:** 200 OK with í† í° ìŒ

**ì˜¤ë¥˜ ì‚¬ë¡€:**
- 400: ì˜ëª»ëœ ìš”ì²­ í˜•ì‹
- 401: ì˜ëª»ëœ ìê²© ì¦ëª…

#### POST /api/v1/auth/refresh
ë§Œë£Œëœ ì•¡ì„¸ìŠ¤ í† í°ì„ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤.

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}
```

**ì‘ë‹µ:** 200 OK with ìƒˆë¡œìš´ í† í° ìŒ

**ì˜¤ë¥˜ ì‚¬ë¡€:**
- 401: ì˜ëª»ë˜ê±°ë‚˜ ë§Œë£Œëœ ë¦¬í”„ë ˆì‹œ í† í°

#### POST /api/v1/auth/logout
ë¦¬í”„ë ˆì‹œ í† í°ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiJ9..."
}
```

**ì‘ë‹µ:** 200 OK (ë¹ˆ ì‘ë‹µ)

#### GET /api/v1/auth/oauth2/callback/{provider}
ì™¸ë¶€ OAuth2 ì œê³µì(ì˜ˆ: Google, GitHub, Discord) ì¸ì¦ ì„±ê³µ í›„ í† í° êµí™˜ì„ ì²˜ë¦¬í•  ì˜ˆì •ì…ë‹ˆë‹¤.

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜:**
- `provider`: OAuth ê³µê¸‰ì ì‹ë³„ì(`google`,`github`,`discord` ë“±)

**í˜„ì¬ ìƒíƒœ:** 501 Not Implemented â€” í–¥í›„ ë¦´ë¦¬ìŠ¤ì—ì„œ ì•¡ì„¸ìŠ¤/ë¦¬í”„ë ˆì‹œ í† í° ë°œê¸‰ ë¡œì§ì„ ì—°ê²°í•  ì˜ˆì •ì…ë‹ˆë‹¤.

### ì¥ì†Œ ê´€ë¦¬ ì—”ë“œí¬ì¸íŠ¸

#### GET /api/v1/projects/{projectId}/places
ì„ íƒì  í•„í„°ë§ì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ ì¥ì†Œ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜:**
- `projectId`: í”„ë¡œì íŠ¸ ì‹ë³„ì

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜:**
- `unitIds`: ë‹¨ì²´ IDë¡œ í•„í„°ë§ (ì„ íƒì‚¬í•­)
- `includeShared`: ê³µìœ  ì¥ì†Œ í¬í•¨ (ê¸°ë³¸ê°’: false)
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (0 ê¸°ë°˜, ê¸°ë³¸ê°’: 0)
- `size`: í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)
- `sort`: ì •ë ¬ ê¸°ì¤€ (ì˜ˆ: "name,asc")

**ì‘ë‹µ:** 200 OK with í˜ì´ì§€ë„¤ì´ì…˜ëœ ì¥ì†Œ ëª©ë¡

**ì˜ˆì œ ìš”ì²­:**
```http
GET /api/v1/projects/girls-band-cry/places?page=0&size=10&sort=name,asc
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
```

**ì˜ˆì œ ì‘ë‹µ (2025-11-17 ì—…ë°ì´íŠ¸):**
```json
{
  "success": true,
  "statusCode": 200,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440205",
      "name": "ì¹´ì™€ì‚¬í‚¤ ì—­ ë™ìª½ì¶œêµ¬ ì• ê´‘ì¥",
      "types": ["filming_location", "tour_spot"],
      "introText": "ê±¸ì¦ˆë°´ë“œ í¬ë¼ì´ 1í™” ì˜¤í”„ë‹ ì´¬ì˜ì§€ë¡œ íŒ¬ë“¤ì´ ì„±ì§€ìˆœë¡€í•˜ëŠ” ëŒ€í‘œ ìŠ¤í¿ì…ë‹ˆë‹¤.",
      "latitude": 35.5308,
      "longitude": 139.6981,
      "thumbnailUrl": "https://cdn.girlsbandtabi.dev/places/205/cover.jpg",
      "tags": ["station", "opening"],
      "regionSummary": {
        "code": "JPN-14-201-301",
        "primaryName": "ê°€ë‚˜ê°€ì™€í˜„ ì¹´ì™€ì‚¬í‚¤ì‹œ ì¹´ì™€ì‚¬í‚¤êµ¬",
        "path": "ì¼ë³¸ > ê°€ë‚˜ê°€ì™€í˜„ > ì¹´ì™€ì‚¬í‚¤ì‹œ > ì¹´ì™€ì‚¬í‚¤êµ¬",
        "level": 3
      }
    }
  ],
  "pagination": {
    "currentPage": 0,
    "pageSize": 10,
    "totalPages": 3,
    "totalItems": 25,
    "isFirst": true,
    "isLast": false,
    "hasNext": true,
    "hasPrevious": false,
    "numberOfItems": 10
  },
  "metadata": {
    "requestId": "req_1699804800_1234",
    "timestamp": "2025-11-17T10:00:00Z",
    "version": "v1",
    "processingTimeMs": 108
  }
}
```

#### GET /api/v1/projects/{projectId}/places/{placeId}
ìƒì„¸í•œ ì¥ì†Œ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜:**
- `projectId`: í”„ë¡œì íŠ¸ ì‹ë³„ì
- `placeId`: ì¥ì†Œ ì‹ë³„ì

**ì‘ë‹µ:** 200 OK with ì¥ì†Œ ì„¸ë¶€ ì •ë³´

**ì˜ˆì œ ì‘ë‹µ (ìš”ì•½/ì§€ì—­ ë©”íƒ€ ì—…ë°ì´íŠ¸ í¬í•¨):**
```json
{
  "success": true,
  "statusCode": 200,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440205",
    "name": "ì¹´ì™€ì‚¬í‚¤ ì—­ ë™ìª½ì¶œêµ¬ ì• ê´‘ì¥",
    "types": ["filming_location", "tour_spot"],
    "introText": "ê±¸ì¦ˆë°´ë“œ í¬ë¼ì´ 1í™” ì˜¤í”„ë‹ ì´¬ì˜ì§€ë¡œ íŒ¬ë“¤ì´ ì„±ì§€ìˆœë¡€í•˜ëŠ” ëŒ€í‘œ ìŠ¤í¿ì…ë‹ˆë‹¤.",
    "description": "ì¹´ì™€ì‚¬í‚¤ì—­ ë™ìª½ ê´‘ì¥ì—ì„œ ì´¬ì˜ëœ ëŒ€í‘œ ì¥ë©´ì…ë‹ˆë‹¤.",
    "latitude": 35.5308,
    "longitude": 139.6981,
    "address": "ì¼ë³¸ ê°€ë‚˜ê°€ì™€í˜„ ì¹´ì™€ì‚¬í‚¤ì‹œ ì¹´ì™€ì‚¬í‚¤êµ¬",
    "tags": ["station", "opening"],
    "primaryImage": {
      "imageId": "img-001",
      "url": "https://cdn.girlsbandtabi.dev/places/205/cover.jpg",
      "filename": "kawasaki-square.jpg",
      "contentType": "image/jpeg",
      "fileSize": 983221,
      "uploadedAt": "2025-11-10T09:12:00Z",
      "isPrimary": true
    },
    "images": [
      {
        "imageId": "img-001",
        "url": "https://cdn.girlsbandtabi.dev/places/205/cover.jpg",
        "filename": "kawasaki-square.jpg",
        "contentType": "image/jpeg",
        "fileSize": 983221,
        "uploadedAt": "2025-11-10T09:12:00Z",
        "isPrimary": true
      }
    ],
    "regionSummary": {
      "code": "JPN-14-201-301",
      "primaryName": "ê°€ë‚˜ê°€ì™€í˜„ ì¹´ì™€ì‚¬í‚¤ì‹œ ì¹´ì™€ì‚¬í‚¤êµ¬",
      "path": "ì¼ë³¸ > ê°€ë‚˜ê°€ì™€í˜„ > ì¹´ì™€ì‚¬í‚¤ì‹œ > ì¹´ì™€ì‚¬í‚¤êµ¬",
      "level": 3
    },
    "createdAt": "2025-11-09T12:00:00Z",
    "updatedAt": "2025-11-15T08:30:00Z"
  },
  "metadata": {
    "requestId": "req_1699804800_5678",
    "timestamp": "2025-11-17T10:05:00Z",
    "version": "v1",
    "processingTimeMs": 94
  }
}
```

#### GET /api/v1/projects/{projectId}/places/within-bounds
ì§€ë¦¬ì  ê²½ê³„ ë‚´ì˜ ì¥ì†Œë“¤ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜:**
- `projectId`: í”„ë¡œì íŠ¸ ì‹ë³„ì

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜:**
- `north`: ë¶ìª½ ìœ„ë„ ê²½ê³„ (í•„ìˆ˜)
- `south`: ë‚¨ìª½ ìœ„ë„ ê²½ê³„ (í•„ìˆ˜)
- `east`: ë™ìª½ ê²½ë„ ê²½ê³„ (í•„ìˆ˜)
- `west`: ì„œìª½ ê²½ë„ ê²½ê³„ (í•„ìˆ˜)

**ì‘ë‹µ:** 200 OK with ì¥ì†Œ ëª©ë¡

#### GET /api/v1/projects/{projectId}/places/nearby
íŠ¹ì • ìœ„ì¹˜ ê·¼ì²˜ì˜ ì¥ì†Œë“¤ì„ ì°¾ìŠµë‹ˆë‹¤.

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜:**
- `projectId`: í”„ë¡œì íŠ¸ ì‹ë³„ì

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜:**
- `lat`: ìœ„ë„ (í•„ìˆ˜)
- `lon`: ê²½ë„ (í•„ìˆ˜)
- `radius`: ë¯¸í„° ë‹¨ìœ„ì˜ ê²€ìƒ‰ ë°˜ê²½ (í•„ìˆ˜)

**ì‘ë‹µ:** 200 OK with ê·¼ì²˜ ì¥ì†Œë“¤

#### POST /api/v1/projects/{projectId}/places
ìƒˆë¡œìš´ ì¥ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (ê´€ë¦¬ì ì „ìš©).

**ì¸ê°€:** `ADMIN` ë˜ëŠ” `PROJECT_ADMIN`

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "name": "ì¹´ì™€ì‚¬í‚¤ ê´‘ì¥",
  "types": ["filming_location", "tour_spot"],
  "introText": "íŒ¬ë“¤ì´ ì¸ì¦ìƒ·ì„ ë‚¨ê¸°ëŠ” ëŒ€í‘œ ì´¬ì˜ì§€.",
  "description": "ê±¸ì¦ˆë°´ë“œ í¬ë¼ì´ 1í™” ì˜¤í”„ë‹ ì´¬ì˜ì§€",
  "latitude": 35.5308,
  "longitude": 139.6981,
  "address": "ì¼ë³¸ ê°€ë‚˜ê°€ì™€í˜„ ì¹´ì™€ì‚¬í‚¤ì‹œ",
  "unitIds": ["550e8400-e29b-41d4-a716-446655440111"]
}
```

> â“˜ `type` ë‹¨ì¼ ë¬¸ìì—´ í•„ë“œëŠ” 2025-11-17 ë°°í¬ì—ì„œ ì œê±°ë˜ì—ˆìœ¼ë©°, ë‹¤ì¤‘ ë¶„ë¥˜ëŠ” ë°˜ë“œì‹œ `types` ë°°ì—´ë¡œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.

**ì‘ë‹µ:** 201 Created with ì¥ì†Œ ì„¸ë¶€ ì •ë³´

#### PUT /api/v1/projects/{projectId}/places/{placeId}
ê¸°ì¡´ ì¥ì†Œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤ (ê´€ë¦¬ì ì „ìš©).

**ì¸ê°€:** `ADMIN` ë˜ëŠ” `PROJECT_ADMIN`

**ì‘ë‹µ:** 200 OK with ì—…ë°ì´íŠ¸ëœ ì¥ì†Œ ì„¸ë¶€ ì •ë³´

#### DELETE /api/v1/projects/{projectId}/places/{placeId}
ì¥ì†Œë¥¼ ì‚­ì œí•©ë‹ˆë‹¤ (ê´€ë¦¬ì ì „ìš©).

**ì¸ê°€:** `ADMIN` ë˜ëŠ” `PROJECT_ADMIN`

**ì‘ë‹µ:** 204 No Content

### íŒŒì¼ ì—…ë¡œë“œ ì—”ë“œí¬ì¸íŠ¸

#### POST /api/v1/uploads/presigned-url
íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ ì‚¬ì „ ì„œëª…ëœ URLì„ ì–»ìŠµë‹ˆë‹¤.

**ì¸ê°€:** í•„ìˆ˜

**ìš”ì²­ ëª¨ë“œ:**
```json
{
  "fileName": "venue-photo.jpg",
  "fileSize": 2048576,
  "contentType": "image/jpeg",
  "purpose": "place_photo",
  "metadata": {
    "placeId": "place-001",
    "description": "Venue interior"
  }
}
```

**ì‘ë‹µ:** 200 OK with ì‚¬ì „ ì„œëª…ëœ URL

**ì˜ˆì œ ì‘ë‹µ:**
```json
{
  "success": true,
  "statusCode": 200,
  "data": {
    "uploadId": "upload_abc123def456",
    "presignedUrl": "https://girlsbandtabi.r2.example.com/uploads/abc123...?signature=xyz",
    "expiresAt": "2024-11-12T10:15:00Z",
    "maxFileSize": 10485760,
    "allowedContentTypes": ["image/jpeg", "image/png", "image/webp"]
  },
  "metadata": {
    "requestId": "req_1699804800_9999",
    "timestamp": "2024-11-12T10:00:00Z",
    "version": "v1"
  }
}
```

#### POST /api/v1/uploads/{uploadId}/confirm
íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ í™•ì¸(Confirm successful file upload).

**ì¸ê°€(Authorization):** í•„ìˆ˜

**ê²½ë¡œ ë§¤ê°œë³€ìˆ˜(Path Parameters):**
- `uploadId`: ì‚¬ì „ ì„œëª…ëœ URL ìš”ì²­ì˜ ì—…ë¡œë“œ ì‹ë³„ì(Upload identifier)

**ì‘ë‹µ:** 200 OK with ì—…ë¡œë“œ í™•ì¸(upload confirmation)

#### GET /api/v1/uploads/my
ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ íŒŒì¼ ëª©ë¡ ì¡°íšŒ(List user's uploaded files).

**ì¸ê°€(Authorization):** í•„ìˆ˜

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜(Query Parameters):**
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (0 ê¸°ë°˜, ê¸°ë³¸ê°’: 0)
- `size`: í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)

**ì‘ë‹µ:** 200 OK with í˜ì´ì§€ë„¤ì´ì…˜ëœ ì—…ë¡œë“œ ëª©ë¡(paginated uploads list)

#### DELETE /api/v1/uploads/{uploadId}
ì—…ë¡œë“œëœ íŒŒì¼ ì‚­ì œ(Delete an uploaded file).

**ì¸ê°€(Authorization):** í•„ìˆ˜ (ë³¸ì¸ ì—…ë¡œë“œ íŒŒì¼ë§Œ)

**ì‘ë‹µ:** 204 No Content

### ê²€ìƒ‰ ì—”ë“œí¬ì¸íŠ¸

#### GET /api/v1/search/places
ëª¨ë“  í”„ë¡œì íŠ¸ì—ì„œ ì¥ì†Œ ì „ì—­ ê²€ìƒ‰(Global place search across all projects).

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜(Query Parameters):**
- `q`: ê²€ìƒ‰ ì¿¼ë¦¬ (í•„ìˆ˜)
- `project`: í”„ë¡œì íŠ¸ ì½”ë“œë¡œ í•„í„°ë§ (ì„ íƒì‚¬í•­)
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 0)
- `size`: í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)

**ì‘ë‹µ:** 200 OK with ê²€ìƒ‰ ê²°ê³¼(search results)

#### GET /api/v1/search/units
ë‹¨ì²´/ë°´ë“œ ê²€ìƒ‰(Search for units/bands).

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜(Query Parameters):**
- `q`: ê²€ìƒ‰ ì¿¼ë¦¬ (í•„ìˆ˜)
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (ê¸°ë³¸ê°’: 0)
- `size`: í˜ì´ì§€ í¬ê¸° (ê¸°ë³¸ê°’: 20)

**ì‘ë‹µ:** 200 OK with ë‹¨ì²´ ê²€ìƒ‰ ê²°ê³¼(unit search results)


### ì‚¬ìš©ì ê³„ì • ë° í™œë™ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/users/me` | ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ê¸°ë³¸ í”„ë¡œí•„, ì£¼ì²´(subject) ID, ê¶Œí•œ, í†µê³„ í”Œë˜ê·¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| PATCH | `/api/v1/users/me` | `UpdateUserRequest`(displayName, bio, locale ë“±)ì„ ì‚¬ìš©í•´ ê°œì¸ í”„ë¡œí•„ì„ íŒ¨ì¹˜í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| GET | `/api/v1/users/me/visits` | `page`/`size` ì¿¼ë¦¬ë¡œ ìµœê·¼ ë°©ë¬¸ ì´ë²¤íŠ¸ë¥¼ í˜ì´ì§€ë„¤ì´ì…˜í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| GET | `/api/v1/users/me/visits/summary` | `placeId` ì¿¼ë¦¬(UUID)ë¥¼ ë°›ì•„ ì§€ì • ì¥ì†Œì˜ ëˆ„ì  ë°©ë¬¸ ìš”ì•½ì„ ëŒë ¤ì¤ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| GET | `/api/v1/users/me/favorites` | `type` í•„í„° ë° í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›ìœ¼ë¡œ ì¦ê²¨ì°¾ê¸° ì—”í„°í‹° ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| POST | `/api/v1/users/me/favorites` | `{ "entityType": "PLACE", "entityId": "UUID" }` ë³¸ë¬¸ìœ¼ë¡œ ì¦ê²¨ì°¾ê¸°ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| DELETE | `/api/v1/users/me/favorites` | ë™ì¼ ë³¸ë¬¸ì„ ì „ë‹¬í•´ ì¦ê²¨ì°¾ê¸° ë§í¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| GET | `/api/v1/users/search` | `q`,`role`,`active` ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ì ê³„ì •ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤. | `ADMIN` |

> ì¦ê²¨ì°¾ê¸° APIëŠ” ì‚¬ìš©ì UUID ê¸°ì¤€ê³¼ subject ê¸°ì¤€ì„ ë™ì‹œì— ê²€ì‚¬í•´ ì¤‘ë³µ ì €ì¥ì„ ë°©ì§€í•˜ë©°, ì‘ë‹µì€ `PageResponse<FavoriteItem>` í˜•ì‹ì„ ë”°ë¦…ë‹ˆë‹¤.

### ì•Œë¦¼ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/notifications` | ìƒì„± ì‹œê° ì—­ìˆœìœ¼ë¡œ ì •ë ¬ëœ ì•Œë¦¼ í”¼ë“œë¥¼ `PageResponse<NotificationItem>` í˜•íƒœë¡œ ëŒë ¤ì¤ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| POST | `/api/v1/notifications/{id}/read` | ì§€ì • ì•Œë¦¼ì„ ì½ìŒ ì²˜ë¦¬í•˜ë©° ë©±ë“±(ì¶”ê°€ ì—…ë°ì´íŠ¸ ì—†ì´ true). | ì¸ì¦ í•„ìš” |
| GET | `/api/v1/notifications/settings` | `NotificationSettings`(push/email/cateogry) êµ¬ì„±ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |
| PUT | `/api/v1/notifications/settings` | ë™ì¼ DTOë¥¼ ìš”ì²­ ë³¸ë¬¸ìœ¼ë¡œ ë³´ê´€í•˜ì—¬ ì‚¬ìš©ìë³„ êµ¬ë… ì„¤ì •ì„ ê°±ì‹ í•©ë‹ˆë‹¤. | ì¸ì¦ í•„ìš” |

> ì•Œë¦¼ ëª©ë¡ê³¼ ì„¤ì •ì€ subject ë‹¨ìœ„ë¡œ ì €ì¥ë˜ë©°, ê°œì¸í™” ì„¤ì • ì €ì¥ ì‹œ ìë™ìœ¼ë¡œ ì‚¬ìš©ì UUIDë¥¼ ë³‘í–‰ ì €ì¥í•©ë‹ˆë‹¤.

### í™ˆ ìš”ì•½ ì—”ë“œí¬ì¸íŠ¸

#### GET /api/v1/home/summary
í”„ë¡œì íŠ¸ë³„ í™ˆ í™”ë©´ì— í•„ìš”í•œ ì¶”ì²œ ì¥ì†Œ, ë‹¤ê°€ì˜¤ëŠ” ë¼ì´ë¸Œ, ìµœì‹  ë‰´ìŠ¤ë¥¼ ë¬¶ì–´ ì œê³µí•©ë‹ˆë‹¤.

**ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜:**
- `projectId` (í•„ìˆ˜): í”„ë¡œì íŠ¸ ì‹ë³„ì/ìŠ¬ëŸ¬ê·¸.
- `unitIds` (ì„ íƒ): ì½¤ë§ˆ êµ¬ë¶„ UUID ëª©ë¡. ì§€ì • ì‹œ í•´ë‹¹ ìœ ë‹›ê³¼ ê´€ê³„ëœ ë°ì´í„°ë§Œ ë°˜í™˜.

**ì‘ë‹µ:**
```json
{
  "recommendedPlaces": [{"id": "...", "name": "...", "count": 42}],
  "trendingLiveEvents": [{"id": "...", "title": "...", "startTime": "..."}],
  "latestNews": [{"id": "...", "title": "..."}]
}
```

### ì»¤ë®¤ë‹ˆí‹° ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| POST | `/api/v1/projects/{projectCode}/posts` | í”„ë¡œì íŠ¸ í”¼ë“œì— ê²Œì‹œë¬¼ì„ ìƒì„±í•©ë‹ˆë‹¤. `PostCreateRequest` ì‚¬ìš©. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectCode}/posts` | ìµœì‹ ìˆœ ê²Œì‹œë¬¼ í˜ì´ì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/projects/{projectCode}/posts/{postId}` | ê²Œì‹œë¬¼ ìƒì„¸(ë³¸ë¬¸/ì‘ì„±ì/ë©”íƒ€)ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. | ê³µê°œ |
| POST | `/api/v1/projects/{projectCode}/posts/{postId}/comments` | ê²Œì‹œë¬¼ì— ëŒ“ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectCode}/posts/{postId}/comments` | ì‘ì„± ì‹œê° ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ëŒ“ê¸€ ëª©ë¡ì„ ì œê³µí•©ë‹ˆë‹¤. | ê³µê°œ |

### ì¥ì†Œ ëŒ“ê¸€ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/places/{placeId}/comments` | ê¸°ë³¸ ìŠ¤ë ˆë“œ ëª©ë¡ì„ í˜ì´ì§€ë„¤ì´ì…˜í•´ ë°˜í™˜í•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/threads/{threadId}` | ìŠ¤ë ˆë“œ ë‹¨ìœ„ë¡œ ëŒ€í™” ë¬¶ìŒì„ ì¡°íšŒí•©ë‹ˆë‹¤. | ê³µê°œ |
| POST | `/api/v1/places/{placeId}/comments` | `CommentCreateRequest`ë¡œ ëŒ“ê¸€ì„ ìƒì„±í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/places/{placeId}/comments/{commentId}/reply` | ë¶€ëª¨ ëŒ“ê¸€ì— ëŒ€í•œ ëŒ€ëŒ“ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| PUT | `/api/v1/places/{placeId}/comments/{commentId}` | ëŒ“ê¸€ ë³¸ë¬¸/íƒœê·¸ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. | ì‘ì„±ì ë˜ëŠ” ëª¨ë”ë ˆì´í„° |
| PUT | `/api/v1/places/{placeId}/comments/{commentId}/moderate` | ê´€ë¦¬ì ì „ìš© ëª¨ë”ë ˆì´ì…˜(ìˆ¨ê¹€/í‘œì‹œ) ì œì–´. | `ADMIN`/`PROJECT_ADMIN` |
| DELETE | `/api/v1/places/{placeId}/comments/{commentId}` | ëŒ“ê¸€ ì‚­ì œ (ì†Œí”„íŠ¸ delete). | ì‘ì„±ì ë˜ëŠ” ê´€ë¦¬ì |
| GET | `/api/v1/places/{placeId}/comments/tags/popular` | íƒœê·¸ë³„ ì¸ê¸°/ì‚¬ìš© ë¹ˆë„ í†µê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/filter/accessibility` | íœ ì²´ì–´ ë™ì„  ë“± ì ‘ê·¼ì„± ê´€ë ¨ ì½”ë©˜íŠ¸ë¥¼ í•„í„°ë§. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/filter/routes` | ì´ë™ ê²½ë¡œ/êµí†µ íŒ ì½”ë©˜íŠ¸ë¥¼ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/filter/advice` | ì¼ë°˜ íŒ/ì£¼ì˜ì‚¬í•­ ì½”ë©˜íŠ¸. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/filter/photos` | ì‚¬ì§„ì´ ì²¨ë¶€ëœ ì½”ë©˜íŠ¸ë§Œ í•„í„°ë§. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/comments/pinned` | ìš´ì˜ìê°€ ê³ ì •í•œ ì½”ë©˜íŠ¸ë¥¼ ë°˜í™˜. | ê³µê°œ |
| POST | `/api/v1/places/{placeId}/comments/search` | í‚¤ì›Œë“œ/íƒœê·¸ ì¡°ê±´ìœ¼ë¡œ ì½”ë©˜íŠ¸ë¥¼ ì „ì—­ ê²€ìƒ‰. | ê³µê°œ |
| POST | `/api/v1/places/{placeId}/comments/batch` | ID ëª©ë¡ì„ ë°›ì•„ ëŒ€ëŸ‰ ì¡°íšŒ(í•€/ëª¨ë”ë ˆì´ì…˜ ë·°). | ê´€ë¦¬ì |
| GET | `/api/v1/places/{placeId}/comments/stats` | ê°ì •/íƒœê·¸ ì¹´ìš´íŠ¸ ë“± í†µê³„ì¹˜ ì œê³µ. | ê³µê°œ |

> ëª¨ë“  ëŒ“ê¸€ ëª©ë¡ ì‘ë‹µì€ RFC 7807 ì˜¤ë¥˜ í¬ë§·ì„ ì¤€ìˆ˜í•˜ë©°, `PageResponse<CommentThreadDto>` ë˜ëŠ” ë§ì¶¤ DTOë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.

### ì¥ì†Œ ê°€ì´ë“œ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/places/{placeId}/guides` | ë°œí–‰ëœ ê°€ì´ë“œë¥¼ ìš°ì„ ìˆœìœ„ ìˆœìœ¼ë¡œ ë…¸ì¶œí•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/guides/all` | ë¯¸ë°œí–‰ í¬í•¨ ì „ì²´ ê°€ì´ë“œ ëª©ë¡. | `ADMIN`/`EDITOR` |
| GET | `/api/v1/places/{placeId}/guides/unpublished` | ë°œí–‰ ëŒ€ê¸° ê°€ì´ë“œë§Œ í•„í„°ë§. | `ADMIN`/`EDITOR` |
| GET | `/api/v1/places/{placeId}/guides/high-priority` | í™ˆ/ë°°ë„ˆ ë…¸ì¶œìš© ìƒìœ„ ê°€ì´ë“œ. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/guides/{guideId}` | ë‹¨ì¼ ê°€ì´ë“œ ë³¸ë¬¸/ë©”íƒ€ ì¡°íšŒ. | ê¶Œí•œ í•„ìš” ì—†ìŒ(ë°œí–‰), ë¯¸ë°œí–‰ ì‹œ ê´€ë¦¬ì |
| POST | `/api/v1/places/{placeId}/guides` | ìƒˆ ê°€ì´ë“œ ì‘ì„±. | `ADMIN`/`EDITOR` |
| PUT | `/api/v1/places/{placeId}/guides/{guideId}` | ê°€ì´ë“œ ì»¨í…ì¸ ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. | `ADMIN`/`EDITOR` |
| DELETE | `/api/v1/places/{placeId}/guides/{guideId}` | ê°€ì´ë“œ ì œê±°. | `ADMIN`/`EDITOR` |
| PUT | `/api/v1/places/{placeId}/guides/{guideId}/publish` | ê²Œì‹œ ìƒíƒœ/ìš°ì„ ìˆœìœ„ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤. | `ADMIN`/`EDITOR` |
| GET | `/api/v1/places/{placeId}/guides/{guideId}/preview` | ë°œí–‰ ì „ ë¯¸ë¦¬ë³´ê¸° ë Œë”. | `ADMIN`/`EDITOR` |
| POST | `/api/v1/places/{placeId}/guides/search` | ì œëª©/ë³¸ë¬¸ í‚¤ì›Œë“œë¡œ ê°€ì´ë“œ ê²€ìƒ‰. | `ADMIN`/`EDITOR` |
| POST | `/api/v1/places/{placeId}/guides/batch` | ID ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ì¼ê´„ ì¡°íšŒ. | `ADMIN`/`EDITOR` |

### ì¥ì†Œ ì‚¬ì§„ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/places/{placeId}/photos` | ê¸°ë³¸ ì‚¬ì§„ ëª©ë¡(ê³µê°œ ìŠ¹ì¸ëœ ì´ë¯¸ì§€). | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/photos/all` | ê´€ë¦¬ììš© ì „ì²´ ì‚¬ì§„(ì‚­ì œ í¬í•¨) ëª©ë¡. | ê´€ë¦¬ì |
| GET | `/api/v1/places/{placeId}/photos/featured` | ëŒ€í‘œ/ì¶”ì²œ ì‚¬ì§„ë§Œ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/places/{placeId}/photos/pending` | ìŠ¹ì¸ ëŒ€ê¸° í. | ê´€ë¦¬ì |
| POST | `/api/v1/places/{placeId}/photos` | ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°ì— ìƒˆ ì‚¬ì§„ì„ ì¶”ê°€. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| PUT | `/api/v1/places/{placeId}/photos/{photoId}/approve` | ì‚¬ì§„ ìƒíƒœë¥¼ ìŠ¹ì¸/ê±°ì ˆë¡œ ì„¤ì •. | ê´€ë¦¬ì |
| PUT | `/api/v1/places/{placeId}/photos/{photoId}` | ë©”íƒ€ë°ì´í„°(ìº¡ì…˜, íƒœê·¸, ëŒ€í‘œ ì—¬ë¶€)ë¥¼ ìˆ˜ì •. | ê´€ë¦¬ì |
| DELETE | `/api/v1/places/{placeId}/photos/{photoId}` | ì‚¬ì§„ ë§í¬ë¥¼ ë¹„í™œì„±í™”. | ê´€ë¦¬ì |
| GET | `/api/v1/places/{placeId}/photos/{photoId}` | ë‹¨ì¼ ì‚¬ì§„ ìƒì„¸/íˆìŠ¤í† ë¦¬ë¥¼ ì¡°íšŒ. | ê´€ë¦¬ì |
| POST | `/api/v1/places/{placeId}/photos/batch` | ì‚¬ì§„ ID ë¬¶ìŒìœ¼ë¡œ ì¼ê´„ ì¡°íšŒ/ì •ë ¬. | ê´€ë¦¬ì |

### ë¯¸ë””ì–´ ë§í¬ & ë°°ë„ˆ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| POST | `/api/v1/projects/{projectId}/places/{placeId}/images` | ì—…ë¡œë“œëœ íŒŒì¼ì„ ì¥ì†Œ ì´ë¯¸ì§€ë¡œ ì—°ê²°, `uploadId` ê¸°ë°˜. | `ADMIN` ë˜ëŠ” í”„ë¡œì íŠ¸ ê´€ë¦¬ì |
| DELETE | `/api/v1/projects/{projectId}/places/{placeId}/images/{imageId}` | ì¥ì†Œ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ ìƒì„±(ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° ì§„ì…). | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/places/{placeId}/images/{imageId}:primary` | ëŒ€í‘œ ì´ë¯¸ì§€ í† ê¸€. | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/places/{placeId}/images:reorder` | ì´ë¯¸ì§€ ìˆœì„œë¥¼ ì¬ì •ë ¬(`ReorderRequest`). | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/news/{newsId}/images` | ë‰´ìŠ¤ ì¹´ë“œì— ì´ë¯¸ì§€ë¥¼ ì—°ê²°. | `ADMIN` ë˜ëŠ” í”„ë¡œì íŠ¸ ê´€ë¦¬ì |
| DELETE | `/api/v1/projects/{projectId}/news/{newsId}/images/{imageId}` | ë‰´ìŠ¤ ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­. | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/news/{newsId}/images/{imageId}:primary` | ëŒ€í‘œ ë‰´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ì§€ì •. | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/news/{newsId}/images:reorder` | ë‰´ìŠ¤ ì´ë¯¸ì§€ ë°°ì—´ ìˆœì„œë¥¼ ì¬ì •ë ¬. | ìœ„ì™€ ë™ì¼ |
| POST | `/api/v1/projects/{projectId}/live-events/{liveEventId}/banner` | ë¼ì´ë¸Œ ì´ë²¤íŠ¸ ë°°ë„ˆë¥¼ ì—°ê²°. | `ADMIN` ë˜ëŠ” í”„ë¡œì íŠ¸ ê´€ë¦¬ì |
| DELETE | `/api/v1/projects/{projectId}/live-events/{liveEventId}/banner` | ë°°ë„ˆë¥¼ ë¹„í™œì„±í™”í•˜ê³  ì‚­ì œ ìŠ¹ì¸ ìš”ì²­ì„ ìƒì„±. | ìœ„ì™€ ë™ì¼ |

### ì§€ì—­ íƒìƒ‰ ë° í•„í„° ì—”ë“œí¬ì¸íŠ¸

#### ì „ì—­ ì§€ì—­ íƒìƒ‰ (RegionNavigationController)

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/regions/tree` | ì „ì²´ ì§€ì—­ ê³„ì¸µ(tree)ì„ ë°˜í™˜í•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/regions/countries` | êµ­ê°€ ë ˆë²¨ ì§€ì—­ ëª©ë¡ë§Œ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/regions/{parentCode}/children` | ë¶€ëª¨ ì½”ë“œì— ì†í•œ í•˜ìœ„ ì§€ì—­ì„ ì¡°íšŒ. | ê³µê°œ |
| GET | `/api/v1/regions/{regionCode}/places` | ì§€ì—­ ë‚´ ëŒ€í‘œ ì¥ì†Œ ëª©ë¡ì„ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/regions/popular` | ë°©ë¬¸ ìˆ˜ ê¸°ë°˜ ì¸ê¸° ì§€ì—­ì„ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/regions/search` | ì§€ì—­ëª…/ì½”ë“œë¡œ ì§€ì—­ì„ ê²€ìƒ‰. | ê³µê°œ |

#### í”„ë¡œì íŠ¸ ì§€ì—­ í•„í„° (PlaceRegionFilterController)

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/projects/{projectId}/places/regions/available` | ì¥ì†Œê°€ ì¡´ì¬í•˜ëŠ” ì§€ì—­ ì˜µì…˜ ëª©ë¡ì„ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/regions/filter` | ì§€ì—­ ì½”ë“œ ëª©ë¡ìœ¼ë¡œ ì¥ì†Œë¥¼ í˜ì´ì§€ë„¤ì´ì…˜ í•„í„°ë§. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/regions/stats` | ì§€ì—­ ë ˆë²¨ë³„ ì¥ì†Œ í†µê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/regions/breadcrumb/{regionCode}` | ì§€ì—­ ê²½ë¡œ(ë¸Œë ˆë“œí¬ëŸ¼)ë¥¼ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/regions/map-bounds` | ì„ íƒ ì§€ì—­ì˜ ì§€ë¦¬ì  ê²½ê³„(Bounds)ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/places/regions/favorites` | ì¦ê²¨ì°¾ëŠ” ì§€ì—­ ëª©ë¡ì„ ì €ì¥. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/regions/favorites` | ì €ì¥ëœ ì§€ì—­ ì¦ê²¨ì°¾ê¸° ëª©ë¡ì„ ì¡°íšŒ. | ë¡œê·¸ì¸ ì‚¬ìš©ì |

#### ì „ì—­ ì§€ì—­ ê²€ìƒ‰ (PlaceRegionSearchController)

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/search/place-region/places/by-region/{regionCode}` | ì§€ì—­ ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ì¥ì†Œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | ê³µê°œ |
| GET | `/api/v1/search/place-region/places/by-region-name` | ì§€ì—­ ì´ë¦„ ê²€ìƒ‰ â†’ ì¥ì†Œ ëª©ë¡ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/search/place-region/places/by-multiple-regions` | ë‹¤ì¤‘ ì§€ì—­ ì½”ë“œë¥¼ ë°›ì•„ ë³‘í•© ê²°ê³¼ë¥¼ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/search/place-region/places/{placeId}/region-hierarchy` | ì¥ì†Œê°€ ì†í•œ ì§€ì—­ ê³„ì¸µì„ ë°˜í™˜. | ê³µê°œ |
| GET | `/api/v1/search/place-region/regions/{regionCode}/stats` | íŠ¹ì • ì§€ì—­ì˜ ë°©ë¬¸/ì¥ì†Œ í†µê³„ë¥¼ ì¡°íšŒ. | ê³µê°œ |
| GET | `/api/v1/search/place-region/demo/search-examples` | ìƒ˜í”Œ ì¿¼ë¦¬/ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ë°ëª¨ ë„ìš°ë¯¸. | ê³µê°œ |

#### í”„ë¡œì íŠ¸ í†µí•© ê²€ìƒ‰ (PlaceUnifiedSearchController)

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/projects/{projectId}/places/search/unified` | í…ìŠ¤íŠ¸, íƒœê·¸, ì¢Œí‘œ í•„í„°ê°€ ê²°í•©ëœ í†µí•© ê²€ìƒ‰. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/search/autocomplete` | ìë™ì™„ì„± í›„ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/search/suggestions` | ì¸ê¸° ì¥ì†Œ/íƒœê·¸ ì œì•ˆì„ ì œê³µí•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/search/regions/stats` | ê²€ìƒ‰ ê²°ê³¼ ë‚´ ì§€ì—­ ë¶„í¬ í†µê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/search/popular` | ìµœê·¼ ì¸ê¸° ê²€ìƒ‰ í‚¤ì›Œë“œ/ì¥ì†Œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/places/search/filters/available` | UIê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•„í„° ì •ì˜(íƒ€ì…, íƒœê·¸, ë²”ìœ„)ë¥¼ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/places/search/quick-filters` | ì‚¬ì „ ì •ì˜ëœ í€µ í•„í„° ì¡°í•©ì„ ìƒì„±/ì—…ë°ì´íŠ¸. | ê´€ë¦¬ì |
| GET | `/api/v1/projects/{projectId}/places/search/quick-filters` | ì €ì¥ëœ í€µ í•„í„° êµ¬ì„±ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |

### ë‹¨ì²´ ë° í”„ë¡œì íŠ¸ ì—­í•  ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/projects/{projectId}/units` | í”„ë¡œì íŠ¸ì— ì—°ê²°ëœ ë‹¨ì²´ ëª©ë¡ì„ í˜ì´ì§€ë„¤ì´ì…˜ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/units/{bandCode}` | ë‹¨ì¼ ë‹¨ì²´ ì„¸ë¶€ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/units` | ë‹¨ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. | `ADMIN`/`PROJECT_ADMIN` |
| PUT | `/api/v1/projects/{projectId}/units/{bandCode}` | ë‹¨ì²´ ë©”íƒ€ë°ì´í„°ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. | `ADMIN`/`PROJECT_ADMIN` |
| DELETE | `/api/v1/projects/{projectId}/units/{bandCode}` | ë‹¨ì²´ë¥¼ ë¹„í™œì„±í™”/ì‚­ì œ. | `ADMIN`/`PROJECT_ADMIN` |
| GET | `/api/v1/projects/{projectId}/units/search` | ë‹¨ì²´ ê²€ìƒ‰/ìë™ì™„ì„±. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/roles` | í”„ë¡œì íŠ¸ ì—­í•  ë¶€ì—¬ í˜„í™©ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | `ADMIN` |
| POST | `/api/v1/projects/{projectId}/roles/grant` | `userId`,`role`ë¡œ í”„ë¡œì íŠ¸ ì—­í• ì„ ë¶€ì—¬. | `ADMIN` |
| POST | `/api/v1/projects/{projectId}/roles/revoke` | ì§€ì • ì‚¬ìš©ìì˜ í”„ë¡œì íŠ¸ ì—­í• ì„ íšŒìˆ˜. | `ADMIN` |

### ë¼ì´ë¸Œ ì´ë²¤íŠ¸ & ë‰´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/projects/{projectId}/live-events` | í”„ë¡œì íŠ¸ì˜ ë¼ì´ë¸Œ ì´ë²¤íŠ¸ ëª©ë¡ì„ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/live-events/{liveEventId}` | ê°œë³„ ì´ë²¤íŠ¸ ì„¸ë¶€ ì •ë³´ë¥¼ ì¡°íšŒ. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/live-events` | ìƒˆ ì´ë²¤íŠ¸ë¥¼ ìƒì„±. | `ADMIN`/`PROJECT_ADMIN` |
| PUT | `/api/v1/projects/{projectId}/live-events/{liveEventId}` | ì´ë²¤íŠ¸ ë‚´ìš©/ì‹œê°„ì„ ìˆ˜ì •. | `ADMIN`/`PROJECT_ADMIN` |
| DELETE | `/api/v1/projects/{projectId}/live-events/{liveEventId}` | ì´ë²¤íŠ¸ë¥¼ ì·¨ì†Œ/ì‚­ì œ. | `ADMIN`/`PROJECT_ADMIN` |
| POST | `/api/v1/projects/{projectId}/live-events/{liveEventId}/verification` | í˜„ì¥ ì¸ì¦ ì¦ê±°(ì‚¬ì§„ ë“±)ë¥¼ ì—…ë¡œë“œ/ê²€ì¦ íì— ë„£ìŠµë‹ˆë‹¤. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/news` | í”„ë¡œì íŠ¸ ë‰´ìŠ¤ ëª©ë¡ì„ ë°˜í™˜. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/projects/{projectId}/news/{newsId}` | ë‰´ìŠ¤ ìƒì„¸(ë³¸ë¬¸, ì²¨ë¶€)ë¥¼ ì œê³µ. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/news` | ìƒˆ ë‰´ìŠ¤ í•­ëª©ì„ ì‘ì„±. | `ADMIN`/`PROJECT_ADMIN` |
| PUT | `/api/v1/projects/{projectId}/news/{newsId}` | ë‰´ìŠ¤ ë‚´ìš©ì„ ì—…ë°ì´íŠ¸. | `ADMIN`/`PROJECT_ADMIN` |
| DELETE | `/api/v1/projects/{projectId}/news/{newsId}` | ë‰´ìŠ¤ í•­ëª©ì„ ì‚­ì œ. | `ADMIN`/`PROJECT_ADMIN` |

### ê²€ì¦ ì—”ë“œí¬ì¸íŠ¸

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| POST | `/api/v1/projects/{projectId}/places/{placeId}/verification` | ì¥ì†Œ ë°©ë¬¸ ì¦ê±°(ì‚¬ì§„, ë©”ëª¨) ì œì¶œ ë° ê°ì‚¬ ë¡œê·¸ ê¸°ë¡. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| POST | `/api/v1/projects/{projectId}/live-events/{liveEventId}/verification` | ë¼ì´ë¸Œ ì´ë²¤íŠ¸ ì°¸ì„ ì¸ì¦ì„ ì—…ë¡œë“œ. | ë¡œê·¸ì¸ ì‚¬ìš©ì |
| GET | `/api/v1/verification/config` | ì¦ë¹™ ì—…ë¡œë“œ ì •ì±…(ìµœëŒ€ í¬ê¸°, í—ˆìš© í¬ë§·, TTL)ì„ ì¡°íšŒ. | ê³µê°œ |
| GET | `/api/v1/verification/challenge` | í´ë¼ì´ì–¸íŠ¸ê°€ í¼ì¦/ì±Œë¦°ì§€ë¥¼ ì‚¬ì „ íšë“í•´ ë´‡ ì œì¶œì„ ë°©ì§€. | ê³µê°œ |

### ê´€ë¦¬ì(Admin) ë¶„ì„ ë° ìš´ì˜ ì—”ë“œí¬ì¸íŠ¸

#### ê°€ì‹œì„± & ëª¨ë‹ˆí„°ë§

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/admin/analytics/visits/by-place` | í”„ë¡œì íŠ¸Â·ìœ ë‹› í•„í„° ê¸°ì¤€ ë°©ë¬¸ ìˆ˜ë¥¼ ì¥ì†Œë³„ë¡œ ì§‘ê³„í•©ë‹ˆë‹¤(`from`,`to`,`unitIds`). | `ADMIN` |
| GET | `/api/v1/admin/analytics/visits/timeseries` | `interval` ë‹¨ìœ„(ë¶„/ì‹œ/ì¼ ë“±)ì˜ ë°©ë¬¸ íƒ€ì„ì‹œë¦¬ì¦ˆë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/dashboard` | Redis/DB/í ìƒíƒœ, ì•Œë¦¼ ì§€í‘œ ë“± ì¢…í•© ëŒ€ì‹œë³´ë“œ ìœ„ì ¯ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/audit-logs` | ê°ì‚¬ ë¡œê·¸ë¥¼ í˜ì´ì§€ë„¤ì´ì…˜ ì¡°íšŒí•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/circuit-breakers` | ì „ì²´ ì„œí‚· ë¸Œë ˆì´ì»¤ ìƒíƒœ(OPEN/CLOSED)ë¥¼ ë‚˜ì—´í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/circuit-breakers/redis` | Redis ê´€ë ¨ ë¸Œë ˆì´ì»¤, ì˜ˆë¹„ ì¡°ì¹˜ ìƒíƒœë¥¼ ë°˜í™˜. | `ADMIN` |
| GET | `/api/v1/admin/circuit-breakers/database` | DB ë¸Œë ˆì´ì»¤ ìƒíƒœë¥¼ ë°˜í™˜. | `ADMIN` |
| GET | `/api/v1/admin/events/stream` | SSE ê¸°ë°˜ìœ¼ë¡œ ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°. | `ADMIN` |
| GET | `/api/v1/admin/stream/activity` | ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œìš© í™œë™ í”¼ë“œë¥¼ WebFluxë¡œ ìŠ¤íŠ¸ë¦¬ë°í•©ë‹ˆë‹¤. | `ADMIN` |

#### ì½˜í…ì¸  & ë°ì´í„° ê´€ë¦¬

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| POST | `/api/v1/admin/exports` | ëŒ€ëŸ‰ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‘ì—…ì„ ìƒì„±í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/exports/{id}` | ë‚´ë³´ë‚´ê¸° ìƒíƒœ/ë©”íƒ€ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/exports/{id}/download` | ì™„ë£Œëœ ë‚´ë³´ë‚´ê¸° ê²°ê³¼ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/insights/projects` | í”„ë¡œì íŠ¸ë³„ ì£¼ìš” KPI(ì¥ì†Œ ìˆ˜, ë°©ë¬¸ ìˆ˜ ë“±)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/insights/projects/{projectId}/units` | ë‹¨ì¼ í”„ë¡œì íŠ¸ì˜ ë‹¨ì²´ë³„ ì§€í‘œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/media-deletions` | ì´ë¯¸ì§€ ì‚­ì œ ìš”ì²­ íë¥¼ í˜ì´ì§€ë„¤ì´ì…˜í•©ë‹ˆë‹¤. | `ADMIN` |
| POST | `/api/v1/admin/media-deletions/{requestId}/approve` | ì‚­ì œ ìš”ì²­ì„ ìŠ¹ì¸í•´ ì‹¤ì œ R2 ì˜¤ë¸Œì íŠ¸ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤. | `ADMIN` |
| POST | `/api/v1/admin/media-deletions/{requestId}/reject` | ì‚­ì œ ìš”ì²­ì„ ê±°ì ˆí•˜ê³  ì‚¬ìœ ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/projects/{projectId}/admin/live-events` | í”„ë¡œì íŠ¸ë³„ ë¼ì´ë¸Œ ì´ë²¤íŠ¸ ê´€ë¦¬ìš© ëª©ë¡(ì‹¬í™” í•„í„° í¬í•¨). | `ADMIN`/`PROJECT_ADMIN` |
| POST | `/api/v1/projects/{projectId}/admin/places/{placeId}/units:replace` | ì¥ì†Œì— ì—°ê²°ëœ ë‹¨ì²´ ëª©ë¡ì„ ì¼ê´„ ì¹˜í™˜í•©ë‹ˆë‹¤. | `ADMIN`/`PROJECT_ADMIN` |
| POST | `/api/v1/projects/{projectId}/admin/news/{newsId}/units:replace` | ë‰´ìŠ¤-ë‹¨ì²´ ì—°ê³„ë¥¼ ì¼ê´„ ì¹˜í™˜. | `ADMIN`/`PROJECT_ADMIN` |
| POST | `/api/v1/projects/{projectId}/admin/live-events/{liveEventId}/units:replace` | ë¼ì´ë¸Œ ì´ë²¤íŠ¸-ë‹¨ì²´ ì—°ê³„ë¥¼ ì¼ê´„ ì¹˜í™˜. | `ADMIN`/`PROJECT_ADMIN` |
| GET | `/api/v1/projects/{projectId}/admin/places/{placeId}/visits` | ë°©ë¬¸ ì´ë²¤íŠ¸ ìƒì„¸ ë¡œê·¸ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. | `ADMIN`/`PROJECT_ADMIN` |
| GET | `/api/v1/projects/{projectId}/admin/places/{placeId}/visits/summary` | ê¸°ê°„ë³„ ë°©ë¬¸ ì§‘ê³„ë¥¼ ë°˜í™˜. | `ADMIN`/`PROJECT_ADMIN` |
| GET | `/api/v1/projects/{projectId}/admin/places/{placeId}/visits/anomalies` | ì´ìƒ íƒì§€ëœ ë°©ë¬¸/ë¶€ì • ì‚¬ìš© íŒ¨í„´ì„ ì¡°íšŒ. | `ADMIN`/`PROJECT_ADMIN` |
| POST | `/api/v1/projects/{projectId}/admin/places/{placeId}/visits/{visitId}/moderate` | íŠ¹ì • ë°©ë¬¸ ì´ë²¤íŠ¸ë¥¼ ìŠ¹ì¸/ê±°ì ˆë¡œ í‘œì‹œí•©ë‹ˆë‹¤. | `ADMIN`/`PROJECT_ADMIN` |

#### ë³´ì•ˆ & ê¶Œí•œ

| Method | Path | ì„¤ëª… | ì¸ì¦/ê¶Œí•œ |
| --- | --- | --- | --- |
| GET | `/api/v1/admin/users` | í•„í„°(`q`,`role`,`active`)ì™€ ì •ë ¬ ì˜µì…˜ìœ¼ë¡œ ê´€ë¦¬ì ë·° ì‚¬ìš©ì ëª©ë¡ì„ ì œê³µí•©ë‹ˆë‹¤. | `ADMIN` |
| POST | `/api/v1/admin/users/{userId}/role` | ì‹œìŠ¤í…œ ì „ì—­ ì—­í• (USER/EDITOR/ADMIN ë“±)ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/password-security/config` | ë¹„ë°€ë²ˆí˜¸ ì •ì±…(ê¸¸ì´, ë¬¸ìì…‹, í† ê¸€)ì„ ì¡°íšŒí•©ë‹ˆë‹¤. | `ADMIN` |
| GET | `/api/v1/admin/password-security/test` | ì…ë ¥ëœ íŒ¨ìŠ¤ì›Œë“œê°€ ì •ì±…ì— ë§ëŠ”ì§€ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤. | `ADMIN` |
| POST | `/api/v1/admin/tokens/revoke` | ìœ„í—˜ ì„¸ì…˜/í† í°ì„ ê°•ì œ íê¸°í•©ë‹ˆë‹¤. | `ADMIN` |

> ëª¨ë“  Admin ê³„ì—´ APIëŠ” RBAC + ê°ì‚¬ ë¡œê·¸ê°€ ê°•ì œë˜ë©°, `X-Request-Id`ê°€ ëˆ„ë½ë˜ë©´ ìš”ì²­ì´ ê±°ë¶€ë©ë‹ˆë‹¤.

### í—¬ìŠ¤ ë° ëª¨ë‹ˆí„°ë§ ì—”ë“œí¬ì¸íŠ¸

#### GET /api/v1/health
ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ê³¼ ê¸°ë³¸ ìƒíƒœë§Œ ë°˜í™˜í•˜ëŠ” ê²½ëŸ‰ í—¬ìŠ¤ ì²´í¬ì…ë‹ˆë‹¤.

**ì‘ë‹µ:**
```json
{
  "status": "UP",
  "version": "1.2.0",
  "timestamp": "2025-11-18T10:00:00Z"
}
```

#### GET /api/v1/health/detailed
DBÂ·Redis ë“± ì™¸ë¶€ ì˜ì¡´ì„± ìƒíƒœë¥¼ í¬í•¨í•œ í™•ì¥ í—¬ìŠ¤ ì²´í¬ì…ë‹ˆë‹¤. ëª¨ë“  í•˜ìœ„ ì²´í¬ê°€ `UP`ì´ ì•„ë‹ ê²½ìš° `status`ëŠ” `DEGRADED`ë¡œ ë–¨ì–´ì§‘ë‹ˆë‹¤.

#### GET /api/v1/health/ready
Kubernetes readiness probeë¡œ, DB ì»¤ë„¥ì…˜ í™•ì¸ í›„ ì¤€ë¹„ ìƒíƒœ ì—¬ë¶€(`status=ready` ë˜ëŠ” 503)ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

#### GET /api/v1/health/live
Kubernetes liveness probeë¡œ ìµœì†Œí•œì˜ ìƒì¡´ ì—¬ë¶€ë§Œ íŒë‹¨í•©ë‹ˆë‹¤.

#### GET /actuator/health
ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸(System health check).

**ì‘ë‹µ:** 200 OK with ìƒíƒœ ì •ë³´(health status)

```json
{
  "status": "UP",
  "components": {
    "db": {
      "status": "UP",
      "details": {
        "database": "PostgreSQL",
        "validationQuery": "isValid()"
      }
    },
    "redis": {
      "status": "UP",
      "details": {
        "version": "7.0.0"
      }
    },
    "r2": {
      "status": "UP",
      "details": {
        "bucket": "girlsbandtabi"
      }
    }
  }
}
```

#### GET /actuator/metrics
Prometheus ë©”íŠ¸ë¦­ ì—”ë“œí¬ì¸íŠ¸(Prometheus metrics endpoint).

**ì‘ë‹µ:** Prometheus í˜•ì‹ì˜ ë©”íŠ¸ë¦­(Metrics in Prometheus format)

---

## ìš”ì²­/ì‘ë‹µ í˜•ì‹

### í‘œì¤€í™”ëœ ApiResponse ë˜í¼
ëª¨ë“  API ì‘ë‹µì€ ì˜¤ë¥˜ ì‚¬ë¡€ì— ëŒ€í•œ RFC 7807 Problem Detailsë¥¼ êµ¬í˜„í•˜ëŠ” ì¼ê´€ëœ `ApiResponse<T>` ë˜í¼ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### ì„±ê³µ ì‘ë‹µ êµ¬ì¡°
```json
{
  "success": true,
  "statusCode": 200,
  "data": "<response_data>",
  "metadata": {
    "requestId": "req_1699804800_1234",
    "timestamp": "2024-11-12T10:00:00Z",
    "version": "v1",
    "processingTimeMs": 125,
    "correlationId": "trace_abc123",
    "serverId": "instance-001"
  },
  "pagination": {
    "currentPage": 0,
    "pageSize": 20,
    "totalPages": 5,
    "totalItems": 100,
    "isFirst": true,
    "isLast": false,
    "hasNext": true,
    "hasPrevious": false,
    "numberOfItems": 20
  }
}
```

#### ì˜¤ë¥˜ ì‘ë‹µ êµ¬ì¡°
```json
{
  "success": false,
  "statusCode": 400,
  "data": null,
  "error": {
    "code": "VALIDATION_FAILED",
    "message": "Request validation failed",
    "details": {
      "violatedConstraints": ["email format", "password strength"]
    },
    "fieldErrors": [
      {
        "field": "email",
        "message": "must be a valid email address",
        "rejectedValue": "invalid-email",
        "code": "EMAIL_INVALID"
      }
    ],
    "type": "https://docs.api.example.com/errors#validation-failed",
    "instance": "/api/v1/auth/register",
    "recoveryActions": [
      "Check the email format",
      "Ensure password meets complexity requirements"
    ],
    "retryInfo": {
      "recommended": false,
      "retryAfterMs": null,
      "maxRetries": null,
      "strategy": null
    }
  },
  "metadata": {
    "requestId": "req_1699804800_1234",
    "timestamp": "2024-11-12T10:00:00Z",
    "version": "v1"
  }
}
```

### ì½˜í…ì¸  íƒ€ì…
- **ìš”ì²­ Content-Type**: `application/json`
- **ì‘ë‹µ Content-Type**: `application/json; charset=utf-8`
- **íŒŒì¼ ì—…ë¡œë“œ**: ì§ì ‘ ì—…ë¡œë“œì—ëŠ” `multipart/form-data`, ì‚¬ì „ ì„œëª…ëœ URLì—ëŠ” `application/json`

### ë‚ ì§œ ë° ì‹œê°„ í˜•ì‹
- **í˜•ì‹**: UTC íƒ€ì„ì¡´ì„ ê°€ì§„ ISO 8601 (`YYYY-MM-DDTHH:mm:ssZ`)
- **ì˜ˆì œ**: `2024-11-12T10:00:00Z`
- **íƒ€ì„ì¡´**: ëª¨ë“  íƒ€ì„ìŠ¤íƒ¬í”„ëŠ” UTCë¡œ í‘œì‹œ

### í˜ì´ì§€ë„¤ì´ì…˜ í˜•ì‹
```json
{
  "pagination": {
    "currentPage": 0,
    "pageSize": 20,
    "totalPages": 5,
    "totalItems": 100,
    "isFirst": true,
    "isLast": false,
    "hasNext": true,
    "hasPrevious": false,
    "numberOfItems": 20
  }
}
```

### í•„ë“œ ëª…ëª… ê·œì¹™
- **camelCase** JSON í•„ë“œìš©
- **snake_case** ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ìš© (ë ˆê±°ì‹œ ì§€ì›ì´ í•„ìš”í•œ ê²½ìš°)
- **kebab-case** URL ê²½ë¡œìš©
- **UPPER_CASE** ìƒìˆ˜ ë° ì˜¤ë¥˜ ì½”ë“œìš©

---

## ì˜¤ë¥˜ ì²˜ë¦¬ ë° RFC 7807

### ì˜¤ë¥˜ ì‘ë‹µ ì² í•™
APIëŠ” ê°œë°œìì™€ ìë™í™”ëœ ì‹œìŠ¤í…œ ëª¨ë‘ê°€ ì˜¤ë¥˜ë¥¼ ì´í•´í•˜ê³  ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ ì¼ê´€ë˜ê³  ê¸°ê³„ íŒë… ê°€ëŠ¥í•œ ì˜¤ë¥˜ ì‘ë‹µì„ ì œê³µí•˜ê¸° ìœ„í•´ **RFC 7807 Problem Details for HTTP APIs**ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

### ì˜¤ë¥˜ ë²”ì£¼

#### 1. í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ (4xx)

**400 Bad Request - ê²€ì¦ ì˜¤ë¥˜**
```json
{
  "success": false,
  "statusCode": 400,
  "error": {
    "code": "VALIDATION_FAILED",
    "message": "Request validation failed",
    "fieldErrors": [
      {
        "field": "email",
        "message": "must be a valid email address",
        "rejectedValue": "not-an-email",
        "code": "EMAIL_INVALID"
      },
      {
        "field": "password",
        "message": "must be at least 8 characters",
        "rejectedValue": null,
        "code": "PASSWORD_TOO_SHORT"
      }
    ],
    "type": "https://docs.api.example.com/errors#validation-failed",
    "instance": "/api/v1/auth/register"
  }
}
```

**401 Unauthorized - ì¸ì¦ í•„ìš”**
```json
{
  "success": false,
  "statusCode": 401,
  "error": {
    "code": "AUTHENTICATION_REQUIRED",
    "message": "Authentication is required to access this resource",
    "type": "https://docs.api.example.com/errors#authentication-required",
    "instance": "/api/v1/places",
    "recoveryActions": [
      "Please provide valid authentication credentials"
    ]
  }
}
```

**403 Forbidden - ë¶ˆì¶©ë¶„í•œ ê¶Œí•œ**
```json
{
  "success": false,
  "statusCode": 403,
  "error": {
    "code": "ACCESS_DENIED",
    "message": "You do not have permission to access this resource",
    "type": "https://docs.api.example.com/errors#access-denied",
    "instance": "/api/v1/admin/users",
    "recoveryActions": [
      "Contact your administrator to request access",
      "Ensure you are using an account with appropriate permissions"
    ]
  }
}
```

**404 Not Found - ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ**
```json
{
  "success": false,
  "statusCode": 404,
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "The requested resource was not found",
    "type": "https://docs.api.example.com/errors#resource-not-found",
    "instance": "/api/v1/places/non-existent-id"
  }
}
```

**409 Conflict - ë¦¬ì†ŒìŠ¤ ì¶©ëŒ**
```json
{
  "success": false,
  "statusCode": 409,
  "error": {
    "code": "CONFLICT",
    "message": "The resource was updated by another request. Refresh and try again.",
    "type": "https://docs.api.example.com/errors#conflict",
    "instance": "/api/v1/places/place-001",
    "recoveryActions": [
      "Refresh the resource and retry your operation",
      "Check for concurrent modifications"
    ],
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 1000,
      "maxRetries": 3,
      "strategy": "IMMEDIATE_RETRY"
    }
  }
}
```

**429 Too Many Requests - Rate Limit Exceeded**
```json
{
  "success": false,
  "statusCode": 429,
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Too many requests. Please try again later.",
    "type": "https://docs.api.example.com/errors#rate-limit-exceeded",
    "instance": "/api/v1/auth/login",
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 60000,
      "maxRetries": 3,
      "strategy": "EXPONENTIAL_BACKOFF"
    }
  }
}
```

#### 2. Server Errors (5xx)

**500 Internal Server Error**
```json
{
  "success": false,
  "statusCode": 500,
  "error": {
    "code": "INTERNAL_SERVER_ERROR",
    "message": "An unexpected error occurred. Please try again later.",
    "type": "https://docs.api.example.com/errors#internal-server-error",
    "instance": "/api/v1/places",
    "recoveryActions": [
      "Please try again in a few moments",
      "Contact support if the problem persists"
    ],
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 30000,
      "maxRetries": 2,
      "strategy": "EXPONENTIAL_BACKOFF"
    }
  }
}
```

**503 Service Unavailable - Circuit Breaker Open**
```json
{
  "success": false,
  "statusCode": 503,
  "error": {
    "code": "CIRCUIT_BREAKER_OPEN",
    "message": "Service temporarily unavailable. Please try again later.",
    "type": "https://docs.api.example.com/errors#circuit-breaker-open",
    "instance": "/api/v1/places/search",
    "details": {
      "serviceName": "search-service"
    },
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 30000,
      "maxRetries": 3,
      "strategy": "EXPONENTIAL_BACKOFF"
    }
  }
}
```

### íŠ¸ëœì­ì…˜ë³„ ì˜¤ë¥˜

**Optimistic Locking Failure**
```json
{
  "success": false,
  "statusCode": 409,
  "error": {
    "code": "OPTIMISTIC_LOCKING_FAILURE",
    "message": "The resource was updated by another request. Refresh and try again.",
    "type": "https://docs.api.example.com/errors#optimistic-locking-failure",
    "instance": "/api/v1/places/place-001",
    "details": {
      "operationId": "op_123456789",
      "severity": "MEDIUM"
    },
    "recoveryActions": [
      "Refresh the resource and retry your operation"
    ]
  }
}
```

**Transaction Timeout**
```json
{
  "success": false,
  "statusCode": 408,
  "error": {
    "code": "TRANSACTION_TIMEOUT",
    "message": "The operation timed out. Please retry shortly.",
    "type": "https://docs.api.example.com/errors#transaction-timeout",
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 30000,
      "maxRetries": 3,
      "strategy": "EXPONENTIAL_BACKOFF"
    }
  }
}
```

### ì˜¤ë¥˜ ì½”ë“œ ì°¸ì¡°

| HTTP Status | Error Code | Description | Retryable |
|-------------|------------|-------------|-----------|
| 400 | `VALIDATION_FAILED` | Request validation failed | No |
| 400 | `INVALID_REQUEST` | Request parameters invalid | No |
| 401 | `AUTHENTICATION_REQUIRED` | Authentication required | No |
| 401 | `AUTHENTICATION_FAILED` | Invalid credentials | No |
| 403 | `ACCESS_DENIED` | Insufficient permissions | No |
| 404 | `RESOURCE_NOT_FOUND` | Resource not found | No |
| 409 | `CONFLICT` | Resource conflict | Yes |
| 409 | `OPTIMISTIC_LOCKING_FAILURE` | Concurrent modification | Yes |
| 429 | `RATE_LIMIT_EXCEEDED` | Rate limit exceeded | Yes |
| 500 | `INTERNAL_SERVER_ERROR` | Internal server error | Yes |
| 503 | `SERVICE_UNAVAILABLE` | Service temporarily unavailable | Yes |
| 503 | `CIRCUIT_BREAKER_OPEN` | Circuit breaker open | Yes |

### ë³µêµ¬ ì¡°ì¹˜
ê° ì˜¤ë¥˜ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë¬¸ì œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì²´ì ì¸ ë³µêµ¬ ì§€ì¹¨ì´ í¬í•¨ë©ë‹ˆë‹¤:

- **ê²€ì¦ ì˜¤ë¥˜(Validation Errors)**: ì…ë ¥ ìˆ˜ì •ì— ëŒ€í•œ í•„ë“œë³„ ê°€ì´ë“œ
- **ì¸ì¦ ì˜¤ë¥˜(Authentication Errors)**: ìœ íš¨í•œ ìê²© ì¦ëª… íšë“ ë‹¨ê³„
- **ì¸ê°€ ì˜¤ë¥˜(Authorization Errors)**: ì ‘ê·¼ ìš”ì²­ì„ ìœ„í•œ ì—°ë½ì²˜ ì •ë³´
- **ì†ë„ ì œí•œ(Rate Limiting)**: ì¬ì‹œë„ íƒ€ì´ë° ë° ë°±ì˜¤í”„ ì „ëµ
- **ì„œë²„ ì˜¤ë¥˜(Server Errors)**: ì¬ì‹œë„ ì •ì±… ë° ì§€ì› ì—°ë½ì²˜

### ì¬ì‹œë„ ì „ëµ

#### ì§€ìˆ˜ ë°±ì˜¤í”„
```
Initial delay: 1 second
Max delay: 60 seconds
Multiplier: 2
Jitter: Â±25%

Attempt 1: 1.0s Â± 0.25s
Attempt 2: 2.0s Â± 0.5s
Attempt 3: 4.0s Â± 1.0s
Attempt 4: 8.0s Â± 2.0s
```

#### ì„ í˜• ë°±ì˜¤í”„
```
Delay: 5 seconds
Max attempts: 3

Attempt 1: 5.0s
Attempt 2: 5.0s
Attempt 3: 5.0s
```

---

## ì†ë„ ì œí•œ ë° í˜ì´ì§€ë„¤ì´ì…˜

### ì†ë„ ì œí•œ

APIëŠ” ë‚¨ìš©ì„ ë°©ì§€í•˜ê³  ê³µì •í•œ ì‚¬ìš©ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë‹¨ê³„ ì†ë„ ì œí•œì„ êµ¬í˜„í•©ë‹ˆë‹¤.

#### ì†ë„ ì œí•œ Tiers

**Global IP Rate Limiting**
- **Limit**: 1,000 requests per hour per IP
- **Window**: 1 hour rolling window
- **Scope**: All endpoints combined

**API Endpoint Rate Limiting**
- **Limit**: 100 requests per minute per IP per endpoint
- **Window**: 1 minute rolling window
- **Scope**: Individual endpoint paths

**Authentication Rate Limiting**
- **Limit**: 5 login attempts per 15 minutes per IP
- **Window**: 15 minutes rolling window
- **Scope**: `/api/v1/auth/login` endpoint only

#### ì†ë„ ì œí•œ í—¤ë”
ëª¨ë“  ì‘ë‹µì—ëŠ” ì†ë„ ì œí•œ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤:

```http
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 85
X-RateLimit-Reset: 1699804920
X-RateLimit-Retry-After: 60
```

#### ì†ë„ ì œí•œ ì´ˆê³¼ ì‘ë‹µ
```json
{
  "success": false,
  "statusCode": 429,
  "error": {
    "code": "RATE_LIMIT_EXCEEDED",
    "message": "Too many requests. Please try again later.",
    "type": "https://docs.api.example.com/errors#rate-limit-exceeded",
    "retryInfo": {
      "recommended": true,
      "retryAfterMs": 60000,
      "maxRetries": 3,
      "strategy": "EXPONENTIAL_BACKOFF"
    }
  }
}
```

#### IP ì°¨ë‹¨
- IPs exceeding rate limits are temporarily blocked
- Block duration: 1 hour for repeated violations
- Automatic unblocking after cool-down period

### í˜ì´ì§€ë„¤ì´ì…˜

#### í‘œì¤€ í˜ì´ì§€ë„¤ì´ì…˜ íŒŒë¼ë¯¸í„°
ëª¨ë“  ëª©ë¡ ì—”ë“œí¬ì¸íŠ¸ëŠ” í‘œì¤€ Spring Data í˜ì´ì§€ë„¤ì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤:

```http
GET /api/v1/places?page=0&size=20&sort=name,asc
```

**ë§¤ê°œë³€ìˆ˜(Parameters):**
- `page`: í˜ì´ì§€ ë²ˆí˜¸ (0 ê¸°ë°˜, ê¸°ë³¸ê°’: 0)
- `size`: í˜ì´ì§€ í¬ê¸° (ìµœëŒ€: 100, ê¸°ë³¸ê°’: 20)
- `sort`: ì •ë ¬ ê¸°ì¤€ (í˜•ì‹: `field,direction`)

**ë‹¤ì¤‘ ì •ë ¬ ê¸°ì¤€(Multiple Sort Criteria):**
```http
GET /api/v1/places?sort=name,asc&sort=createdAt,desc
```

#### í˜ì´ì§€ë„¤ì´ì…˜ Response Format
```json
{
  "success": true,
  "statusCode": 200,
  "data": [...],
  "pagination": {
    "currentPage": 0,
    "pageSize": 20,
    "totalPages": 5,
    "totalItems": 95,
    "isFirst": true,
    "isLast": false,
    "hasNext": true,
    "hasPrevious": false,
    "numberOfItems": 20
  }
}
```

#### ëŒ€ê·œëª¨ ë°ì´í„°ì…‹ ì²˜ë¦¬
ëŒ€ê·œëª¨ ë°ì´í„°ì…‹ì´ ì˜ˆìƒë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ì˜ ê²½ìš°:

**Cursor-Based Pagination (for real-time data)**
```http
GET /api/v1/news?cursor=abc123&limit=20
```

**Response:**
```json
{
  "data": [...],
  "pagination": {
    "nextCursor": "def456",
    "hasNext": true,
    "limit": 20
  }
}
```

#### ì„±ëŠ¥ ê³ ë ¤ ì‚¬í•­
- **ìµœëŒ€ í˜ì´ì§€ í¬ê¸°(Maximum Page Size)**: í˜ì´ì§€ë‹¹ 100 í•­ëª©
- **ì´ ê°œìˆ˜(Total Count)**: ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”ë¥¼ í†µí•œ íš¨ìœ¨ì  ê³„ì‚°
- **ê¹Šì€ í˜ì´ì§€ë„¤ì´ì…˜(Deep Pagination)**: 1000í˜ì´ì§€ ì´í›„ ë¹„ê¶Œì¥ (ëŒ€ìš©ëŸ‰ ì˜¤í”„ì…‹ì€ ì»¤ì„œ ê¸°ë°˜ ì‚¬ìš©)

### ë§í¬ í—¤ë” (RFC 5988)
íƒìƒ‰ í¸ì˜ë¥¼ ìœ„í•´ í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µì—ëŠ” Link í—¤ë”ê°€ í¬í•¨ë©ë‹ˆë‹¤:

```http
Link: <http://api.example.com/places?page=0&size=20>; rel="first",
      <http://api.example.com/places?page=2&size=20>; rel="next",
      <http://api.example.com/places?page=4&size=20>; rel="last"
```

---

## í•„í„°ë§ ë° ê²€ìƒ‰ ê¸°ëŠ¥

### ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ í•„í„°ë§

#### í‘œì¤€ í•„í„°
ëŒ€ë¶€ë¶„ì˜ ëª©ë¡ ì—”ë“œí¬ì¸íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³µí†µ í•„í„° íŒ¨í„´ì„ ì§€ì›í•©ë‹ˆë‹¤:

**ê¸°ë³¸ í•„í„°(Basic Filters):**
```http
GET /api/v1/projects/girls-band-cry/places?unitIds=unit-001,unit-002&includeShared=true
```

**ë‚ ì§œ ë²”ìœ„ í•„í„°ë§(Date Range Filtering):**
```http
GET /api/v1/places?createdAfter=2024-01-01T00:00:00Z&createdBefore=2024-12-31T23:59:59Z
```

**ì§€ë¦¬ì  í•„í„°ë§(Geographic Filtering):**
```http
GET /api/v1/places/within-bounds?north=35.7&south=35.6&east=139.8&west=139.7
GET /api/v1/places/nearby?lat=35.6762&lon=139.6503&radius=1000
```

#### ê³ ê¸‰ í•„í„°ë§ êµ¬ë¬¸

**ë‹¤ì¤‘ ê°’(Multiple Values) (OR ë…¼ë¦¬):**
```http
GET /api/v1/places?tags=music,venue,live
```

**ë²”ìœ„ í•„í„°(Range Filters):**
```http
GET /api/v1/places?visitCount.gte=10&visitCount.lte=100
```

**ì§€ì›ë˜ëŠ” ë²”ìœ„ ì—°ì‚°ì(Supported Range Operators):**
- `gte`: Greater than or equal
- `gt`: Greater than
- `lte`: Less than or equal
- `lt`: Less than
- `eq`: Equal (default)
- `ne`: Not equal

**í…ìŠ¤íŠ¸ í•„í„°(Text Filters):**
```http
GET /api/v1/places?name.contains=live&description.startsWith=Popular
```

**ì§€ì›ë˜ëŠ” í…ìŠ¤íŠ¸ ì—°ì‚°ì(Supported Text Operators):**
- `contains`: Case-insensitive substring match
- `startsWith`: Case-insensitive prefix match
- `endsWith`: Case-insensitive suffix match
- `eq`: Exact match (default)
- `ilike`: Case-insensitive like with wildcards

### ì „ë¬¸ ê²€ìƒ‰

#### ì „ì—­ ê²€ìƒ‰
```http
GET /api/v1/search/places?q=live house tokyo&project=girls-band-cry
```

**Response:**
```json
{
  "success": true,
  "statusCode": 200,
  "data": [
    {
      "id": "place-001",
      "name": "Tokyo Live House",
      "description": "Premier live music venue in Tokyo",
      "score": 0.95,
      "highlights": {
        "name": ["<mark>Tokyo</mark> <mark>Live</mark> <mark>House</mark>"],
        "description": ["Premier <mark>live</mark> music venue in <mark>Tokyo</mark>"]
      },
      "project": "girls-band-cry",
      "location": {
        "latitude": 35.6762,
        "longitude": 139.6503
      }
    }
  ],
  "pagination": {
    "currentPage": 0,
    "pageSize": 20,
    "totalItems": 15
  },
  "metadata": {
    "queryTime": "45ms",
    "searchTerms": ["live", "house", "tokyo"]
  }
}
```

#### ê²€ìƒ‰ ê¸°ëŠ¥
- **í¼ì§€ ë§¤ì¹­(Fuzzy Matching)**: ì˜¤íƒ€ ë° ë³€í˜• ì²˜ë¦¬
- **ê´€ë ¨ì„± ì ìˆ˜(Relevance Scoring)**: ê´€ë ¨ì„±ì— ë”°ë¥¸ ê²°ê³¼ ìˆœìœ„
- **í•˜ì´ë¼ì´íŠ¸(Highlighting)**: ê²°ê³¼ì—ì„œ ê²€ìƒ‰ì–´ ê°•ì¡° í‘œì‹œ
- **íŒ¨ì‹¯ ê²€ìƒ‰(Faceted Search)**: í”„ë¡œì íŠ¸, íƒ€ì…, íƒœê·¸ë³„ í•„í„°
- **ìë™ ì™„ì„±(Autocomplete)**: ì™„ì„± ì œì•ˆ

**ìë™ ì™„ì„± ì˜ˆì‹œ(Autocomplete Example):**
```http
GET /api/v1/search/suggest?q=tok&type=place
```

**Response:**
```json
{
  "suggestions": [
    "Tokyo Live House",
    "Tokyo Station",
    "Tokyo Tower"
  ]
}
```

### ì§€ë¦¬ì  ê²€ìƒ‰

#### ë°”ìš´ë”© ë°•ìŠ¤ ê²€ìƒ‰
ì‚¬ê°í˜• ì˜ì—­ ì•ˆì˜ ì¥ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤:

```http
GET /api/v1/projects/girls-band-cry/places/within-bounds?north=35.7&south=35.6&east=139.8&west=139.7
```

#### ë°˜ê²½ ê²€ìƒ‰
íŠ¹ì • ê±°ë¦¬ ë°˜ê²½ ë‚´ ì¥ì†Œë¥¼ ì°¾ìŠµë‹ˆë‹¤:

```http
GET /api/v1/projects/girls-band-cry/places/nearby?lat=35.6762&lon=139.6503&radius=1000
```

**ë§¤ê°œë³€ìˆ˜(Parameters):**
- `lat`: ì‹­ì§„ë„ ë‹¨ìœ„ì˜ ìœ„ë„
- `lon`: ì‹­ì§„ë„ ë‹¨ìœ„ì˜ ê²½ë„
- `radius`: ë¯¸í„° ë‹¨ìœ„ì˜ ê²€ìƒ‰ ë°˜ê²½ (ìµœëŒ€: 50,000m)

#### ì§€ë¦¬ ì •ë³´ ì‘ë‹µ í˜•ì‹
```json
{
  "success": true,
  "statusCode": 200,
  "data": [
    {
      "id": "place-001",
      "name": "Nearby Venue",
      "latitude": 35.6765,
      "longitude": 139.6500,
      "distance": 45.7,
      "distanceUnit": "meters"
    }
  ]
}
```

### ê³ ê¸‰ ê²€ìƒ‰ ì—°ì‚°ì

#### ë¶ˆë¦¬ì–¸ ë…¼ë¦¬
```http
GET /api/v1/search/places?q=(live OR venue) AND tokyo NOT closed
```

#### í•„ë“œë³„ ê²€ìƒ‰
```http
GET /api/v1/search/places?q=name:tokyo description:live tags:music
```

#### ì™€ì¼ë“œì¹´ë“œ ê²€ìƒ‰
```http
GET /api/v1/search/places?q=tok* *house
```

#### êµ¬ë¬¸ ê²€ìƒ‰
```http
GET /api/v1/search/places?q="live music venue"
```

### í•„í„° ì¡°í•©

ì—¬ëŸ¬ í•„í„°ë§ ë°©ì‹ì„ ì¡°í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```http
GET /api/v1/projects/girls-band-cry/places
  ?q=live music
  &tags=venue,music
  &visitCount.gte=10
  &withinRadius=1000
  &lat=35.6762
  &lon=139.6503
  &createdAfter=2024-01-01T00:00:00Z
  &sort=distance,asc
  &page=0
  &size=20
```

### ê²€ìƒ‰ ì„±ëŠ¥
- **Caching**: Search results cached for 5 minutes
- **Indexes**: Full-text search indexes on name, description, tags
- **Limits**: Maximum 100 results per search
- **Timeout**: Search queries timeout after 30 seconds

---

## íŒŒì¼ ì—…ë¡œë“œ ë° ë¯¸ë””ì–´ ì²˜ë¦¬

### ì—…ë¡œë“œ ì•„í‚¤í…ì²˜
APIëŠ” ì„œë²„ ë¶€í•˜ë¥¼ ìµœì†Œí™”í•˜ê³  ì§ì ‘ í´ë¼ì´ì–¸íŠ¸-ì €ì¥ì†Œ ì—…ë¡œë“œë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ë³´ì•ˆ ì‚¬ì „ ì„œëª… URL ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ **Cloudflare R2**ë¥¼ ë¯¸ë””ì–´ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ì—…ë¡œë“œ í”Œë¡œìš°

#### 1. Request Presigned URL
```http
POST /api/v1/uploads/presigned-url
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
Content-Type: application/json

{
  "fileName": "venue-exterior.jpg",
  "fileSize": 2048576,
  "contentType": "image/jpeg",
  "purpose": "place_photo",
  "metadata": {
    "placeId": "place-001",
    "description": "Venue exterior view",
    "tags": ["exterior", "entrance"]
  }
}
```

**Response:**
```json
{
  "success": true,
  "statusCode": 200,
  "data": {
    "uploadId": "upload_abc123def456",
    "presignedUrl": "https://girlsbandtabi.r2.cloudflare.com/uploads/2024/11/12/abc123-venue-exterior.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=...",
    "publicUrl": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior.jpg",
    "expiresAt": "2024-11-12T10:15:00Z",
    "maxFileSize": 10485760,
    "allowedContentTypes": ["image/jpeg", "image/png", "image/webp"],
    "uploadMetadata": {
      "uploadId": "upload_abc123def456",
      "userId": "550e8400-e29b-41d4-a716-446655440000",
      "purpose": "place_photo",
      "createdAt": "2024-11-12T10:00:00Z"
    }
  },
  "metadata": {
    "requestId": "req_1699804800_1234",
    "timestamp": "2024-11-12T10:00:00Z"
  }
}
```

#### 2. Upload File to Presigned URL
```http
PUT https://girlsbandtabi.r2.cloudflare.com/uploads/2024/11/12/abc123-venue-exterior.jpg?X-Amz-Algorithm=...
Content-Type: image/jpeg
Content-Length: 2048576

[Binary file data]
```

#### 3. Confirm Upload
```http
POST /api/v1/uploads/upload_abc123def456/confirm
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
```

**Response:**
```json
{
  "success": true,
  "statusCode": 200,
  "data": {
    "uploadId": "upload_abc123def456",
    "status": "confirmed",
    "publicUrl": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior.jpg",
    "thumbnails": {
      "small": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior_thumb_200.jpg",
      "medium": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior_thumb_500.jpg",
      "large": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior_thumb_1200.jpg"
    },
    "metadata": {
      "fileName": "venue-exterior.jpg",
      "fileSize": 2048576,
      "contentType": "image/jpeg",
      "width": 1920,
      "height": 1080,
      "uploadedAt": "2024-11-12T10:05:00Z"
    }
  }
}
```

### ì§€ì›ë˜ëŠ” íŒŒì¼ íƒ€ì…

#### ì´ë¯¸ì§€
- **JPEG**: `.jpg`, `.jpeg` (ìµœëŒ€ 10MB)
- **PNG**: `.png` (ìµœëŒ€ 10MB)
- **WebP**: `.webp` (ìµœëŒ€ 10MB)
- **HEIC**: `.heic` (ëª¨ë°”ì¼ ì‚¬ì§„, ìµœëŒ€ 10MB)

#### ë¬¸ì„œ
- **PDF**: `.pdf` (ìµœëŒ€ 50MB)

#### ë¹„ë””ì˜¤ (í–¥í›„)
- **MP4**: `.mp4` (ìµœëŒ€ 100MB)
- **WebM**: `.webm` (ìµœëŒ€ 100MB)

### ì—…ë¡œë“œ ëª©ì (Upload Purpose)
ì—…ë¡œë“œ ëª©ì ë§ˆë‹¤ ë³„ë„ì˜ ê²€ì¦ ë° ì²˜ë¦¬ ê·œì¹™ì´ ì ìš©ë©ë‹ˆë‹¤:

```typescript
type UploadPurpose = 
  | "place_photo"      // Place photos and images
  | "user_avatar"      // User profile pictures  
  | "place_guide"      // Guide documents and images
  | "news_image"       // News article images
  | "unit_photo"       // Band/unit photos
  | "event_banner"     // Event promotional images
  | "verification"     // Location verification photos
```

### ì´ë¯¸ì§€ ì²˜ë¦¬

#### ìë™ ì¸ë„¤ì¼ ìƒì„±
ëª¨ë“  ì—…ë¡œë“œ ì´ë¯¸ì§€ëŠ” ìë™ìœ¼ë¡œ ìµœì í™”ëœ ì¸ë„¤ì¼ì„ ìƒì„±í•©ë‹ˆë‹¤:

- **Small**: 200px max dimension (WebP, 85% quality)
- **Medium**: 500px max dimension (WebP, 85% quality) 
- **Large**: 1200px max dimension (WebP, 90% quality)
- **Original**: Preserved as uploaded

#### ì´ë¯¸ì§€ ìµœì í™”
- **Format Conversion**: Automatic WebP conversion for better compression
- **Quality Optimization**: Adaptive quality based on image content
- **Metadata Stripping**: EXIF data removed for privacy
- **Progressive JPEG**: For better loading experience

### ì—…ë¡œë“œ ì œí•œ ë° ë³´ì•ˆ

#### ì†ë„ ì œí•œ
- **Daily Upload Limit**: 100 uploads per user per day
- **Hourly Upload Limit**: 20 uploads per user per hour
- **Concurrent Uploads**: 5 simultaneous uploads per user
- **Total Storage Per User**: 1GB maximum

#### ë³´ì•ˆ ì¡°ì¹˜
- **File Type Validation**: MIME type and magic number verification
- **Virus Scanning**: All uploads scanned for malware
- **Content Moderation**: Automatic content analysis for inappropriate material
- **Access Control**: User can only upload to their own resources

#### ë¹„ìš© ë³´í˜¸
- **Daily Bandwidth Limit**: 10GB per day
- **Monthly Request Limit**: 1,000,000 requests per month
- **Emergency Shutdown**: Automatic disable at 95% of limits
- **Alerts**: Notifications at 80% of limits

### ì—…ë¡œë“œ ê´€ë¦¬

#### ì‚¬ìš©ì ì—…ë¡œë“œ ëª©ë¡
```http
GET /api/v1/uploads/my?page=0&size=20&purpose=place_photo&status=confirmed
```

**Response:**
```json
{
  "success": true,
  "statusCode": 200,
  "data": [
    {
      "uploadId": "upload_abc123def456",
      "fileName": "venue-exterior.jpg",
      "purpose": "place_photo",
      "status": "confirmed",
      "publicUrl": "https://cdn.girlsbandtabi.com/uploads/2024/11/12/abc123-venue-exterior.jpg",
      "fileSize": 2048576,
      "contentType": "image/jpeg",
      "uploadedAt": "2024-11-12T10:05:00Z",
      "metadata": {
        "placeId": "place-001",
        "description": "Venue exterior view"
      }
    }
  ],
  "pagination": {
    "currentPage": 0,
    "pageSize": 20,
    "totalItems": 15
  }
}
```

#### ì—…ë¡œë“œ ì‚­ì œ
```http
DELETE /api/v1/uploads/upload_abc123def456
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9...
```

**Response:** 204 No Content

### CDN ë° ì„±ëŠ¥

#### ì½˜í…ì¸  ì „ì†¡ ë„¤íŠ¸ì›Œí¬
- **Global CDN**: Cloudflare CDN with edge caching
- **Cache TTL**: 30 days for images, 7 days for documents
- **Compression**: Automatic Brotli/Gzip compression
- **HTTP/2**: Full HTTP/2 support for faster loading

#### ì„±ëŠ¥ ìµœì í™”
- **WebP Support**: Automatic WebP serving to supported browsers
- **Responsive Images**: Multiple sizes for different screen densities
- **Lazy Loading**: Image URLs optimized for lazy loading patterns
- **Progressive Enhancement**: Fallback to original format if WebP unsupported

### ì˜¤ë¥˜ ì²˜ë¦¬

#### ì—…ë¡œë“œ ê²€ì¦ ì˜¤ë¥˜
```json
{
  "success": false,
  "statusCode": 400,
  "error": {
    "code": "INVALID_FILE_TYPE",
    "message": "File type not supported",
    "details": {
      "supportedTypes": ["image/jpeg", "image/png", "image/webp"],
      "receivedType": "image/gif"
    }
  }
}
```

#### ì €ì¥ì†Œ í• ë‹¹ëŸ‰ ì´ˆê³¼
```json
{
  "success": false,
  "statusCode": 413,
  "error": {
    "code": "STORAGE_QUOTA_EXCEEDED",
    "message": "User storage quota exceeded",
    "details": {
      "currentUsage": "950MB",
      "limit": "1GB",
      "availableSpace": "50MB"
    },
    "recoveryActions": [
      "Delete some existing uploads to free space",
      "Contact support to request quota increase"
    ]
  }
}
```

---

## OpenAPI/Swagger í†µí•©

### OpenAPI ì‚¬ì–‘
APIëŠ” ë¬¸ì„œì™€ API ì†Œë¹„ìë¥¼ ìœ„í•œ ê³„ì•½ ì—­í• ì„ ëª¨ë‘ ìˆ˜í–‰í•˜ëŠ” í¬ê´„ì ì¸ OpenAPI 3.1 ì‚¬ì–‘ì„ ì œê³µí•©ë‹ˆë‹¤.

#### ì‚¬ì–‘ ì ‘ê·¼ ë°©ë²•

**OpenAPI JSON:**
```http
GET /api-docs
Accept: application/json
```

**OpenAPI YAML:**
```http  
GET /api-docs.yaml
Accept: application/yaml
```

**ëŒ€í™”í˜• ë¬¸ì„œ(Interactive Documentation):**
```http
GET /swagger-ui.html
```

### OpenAPI Configuration
ì´ APIëŠ” ë‹¤ìŒ ê¸°ëŠ¥ì„ ê°–ì¶˜ SpringDoc OpenAPI 3 êµ¬ì„±ì„ ì œê³µí•©ë‹ˆë‹¤:

```yaml
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
    try-it-out-enabled: true
    filter: true
    display-request-duration: true
    display-operation-id: true
  show-actuator: true
  group-configs:
    - group: auth
      display-name: "ì¸ì¦ API"
      paths-to-match: ["/auth/**"]
    - group: api
      display-name: "REST API" 
      paths-to-match: ["/api/**"]
    - group: actuator
      display-name: "ëª¨ë‹ˆí„°ë§ API"
      paths-to-match: ["/actuator/**"]
```

### ë³´ì•ˆ ìŠ¤í‚¤ë§ˆ
OpenAPI ì‚¬ì–‘ì—ëŠ” JWT Bearer ì¸ì¦ì´ í¬í•¨ë©ë‹ˆë‹¤:

```yaml
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "JWT authentication using Bearer scheme"

security:
  - bearerAuth: []
```

### API ë¬¸ì„œ ê¸°ëŠ¥

#### í’ë¶€í•œ ì£¼ì„
ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ëŠ” ë‹¤ìŒ ìš”ì†Œë¥¼ í¬í•¨í•´ ìƒì„¸í•˜ê²Œ ë¬¸ì„œí™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```kotlin
@Operation(
  summary = "Create a new place",
  description = "Creates a new place in the specified project. Requires admin permissions.",
  responses = [
    ApiResponse(responseCode = "201", description = "Place created successfully"),
    ApiResponse(responseCode = "400", description = "Invalid request data"),
    ApiResponse(responseCode = "401", description = "Authentication required"),
    ApiResponse(responseCode = "403", description = "Insufficient permissions")
  ]
)
@PreAuthorize("hasRole('ADMIN') or @projectAuth.isProjectAdminById(#projectId)")
fun createPlace(
  @PathVariable 
  @Parameter(description = "Project identifier", example = "girls-band-cry")
  projectId: String,
  
  @Valid @RequestBody
  @io.swagger.v3.oas.annotations.parameters.RequestBody(
    description = "Place creation data",
    required = true
  )
  body: CreatePlaceRequest
): ResponseEntity<ApiResponse<PlaceDetailDto>>
```

#### ìŠ¤í‚¤ë§ˆ ë¬¸ì„œí™”
ëª¨ë“  DTOì—ëŠ” í’ë¶€í•œ ìŠ¤í‚¤ë§ˆ ì£¼ì„ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```kotlin
@Schema(description = "Standardized API response wrapper")
data class ApiResponse<T>(
  @Schema(description = "Indicates whether the request was successful", example = "true")
  val success: Boolean,
  
  @Schema(description = "HTTP status code", example = "200")
  val statusCode: Int,
  
  @Schema(description = "Response data (present on success)")
  val data: T? = null,
  
  @Schema(description = "Error information (present on failure)")
  val error: ErrorDetail? = null
)
```

#### ì‘ë‹µ ì˜ˆì‹œ
ê° ì—”ë“œí¬ì¸íŠ¸ì—ëŠ” ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œê°€ í•¨ê»˜ ì œê³µë©ë‹ˆë‹¤:

```kotlin
@Operation(
  summary = "Authenticate user login",
  requestBody = @RequestBody(
    content = [Content(
      mediaType = "application/json",
      examples = [ExampleObject(
        name = "login",
        value = """{"username": "user@example.com", "password": "SecurePassword123!"}"""
      )]
    )]
  )
)
```

### ì¸í„°ë™í‹°ë¸Œ ë¬¸ì„œ

#### Swagger UI ê¸°ëŠ¥
Swagger UIëŠ” ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

- **ë¼ì´ë¸Œ í…ŒìŠ¤íŠ¸(Try It Out)**: ë¬¸ì„œì—ì„œ ì§ì ‘ API í˜¸ì¶œ ì‹¤í–‰
- **ì¸ì¦(Authentication)**: ë‚´ì¥ JWT í† í° ê´€ë¦¬
- **ìš”ì²­/ì‘ë‹µ ê²€ì‚¬(Request/Response Inspection)**: ë¼ì´ë¸Œ ìš”ì²­ ë° ì‘ë‹µ ë³´ê¸°
- **ìŠ¤í‚¤ë§ˆ íƒìƒ‰(Schema Exploration)**: ëŒ€í™”í˜• ìŠ¤í‚¤ë§ˆ ë¸Œë¼ìš°ì €
- **ì˜ˆì œ ìƒì„±(Example Generation)**: ìŠ¤í‚¤ë§ˆì—ì„œ ìë™ ì˜ˆì œ ìƒì„±

#### Swagger UI ì¸ì¦
```javascript
// Authenticate in Swagger UI
const token = "eyJhbGciOiJIUzI1NiJ9...";
SwaggerUI.preauthorizeApiKey("bearerAuth", `Bearer ${token}`);
```

### API ê·¸ë£¹
ë¬¸ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë…¼ë¦¬ì  ê·¸ë£¹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

#### ì¸ì¦ API (`/auth/**`)
- User registration and login
- Token management
- OAuth2 integration (future)

#### í•µì‹¬ API (`/api/**`)
- Place management
- File uploads  
- Search functionality
- User management

#### ëª¨ë‹ˆí„°ë§ API (`/actuator/**`)
- Health checks
- Metrics
- Application information

### ì½”ë“œ ìƒì„±
OpenAPI ì‚¬ì–‘ì€ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ìƒì„±ì„ ì§€ì›í•©ë‹ˆë‹¤:

#### TypeScript í´ë¼ì´ì–¸íŠ¸ ìƒì„±
```bash
npx @openapitools/openapi-generator-cli generate \
  -i http://localhost:8080/api-docs \
  -g typescript-fetch \
  -o ./src/api-client
```

#### Java í´ë¼ì´ì–¸íŠ¸ ìƒì„±
```bash
openapi-generator-cli generate \
  -i http://localhost:8080/api-docs \
  -g java \
  --library okhttp-gson \
  -o ./java-client
```

#### Python í´ë¼ì´ì–¸íŠ¸ ìƒì„±  
```bash
openapi-generator-cli generate \
  -i http://localhost:8080/api-docs \
  -g python \
  -o ./python-client
```

### ê²€ì¦ ë° í…ŒìŠ¤íŠ¸

#### OpenAPI ìœ íš¨ì„± ê²€ì‚¬
```bash
# Validate OpenAPI specification
swagger-codegen validate -i http://localhost:8080/api-docs

# Test with Postman
newman run girls-band-tabi-api.postman_collection.json

# API testing with Dredd
dredd http://localhost:8080/api-docs http://localhost:8080
```

#### ê³„ì•½ ê¸°ë°˜ í…ŒìŠ¤íŠ¸
```yaml
# Example Pact contract test
interactions:
  - description: "Get place details"
    request:
      method: GET
      path: "/api/v1/projects/girls-band-cry/places/place-001"
      headers:
        Authorization: "Bearer validtoken"
    response:
      status: 200
      headers:
        Content-Type: "application/json"
      body:
        success: true
        statusCode: 200
        data:
          id: "place-001"
          name: "Live House Venue"
```

### ì»¤ìŠ¤í„°ë§ˆì´ì§•

#### ì‚¬ìš©ì ì •ì˜ OpenAPI í”„ë¡œì„¸ì„œ
```kotlin
@Component
class CustomOpenApiProcessor : OpenAPIProcessor {
    override fun process(openApi: OpenAPI) {
        // Add custom headers, examples, etc.
        openApi.info.contact = Contact()
            .name("API Support")
            .email("api-support@girlsbandtabi.com")
            .url("https://docs.girlsbandtabi.com")
    }
}
```

---

## í…ŒìŠ¤íŠ¸ ì „ëµ ë° ë„êµ¬

### í…ŒìŠ¤íŠ¸ ì² í•™
APIëŠ” ì‹ ë¢°ì„±, ì„±ëŠ¥ ë° ì •í™•ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë ˆì´ì–´ë¥¼ ê°€ì§„ í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ ì „ëµì„ ë”°ë¦…ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (70%)
ê° ê°œë³„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¹ ë¥´ê³  ë…ë¦½ì ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤:

```kotlin
@ExtendWith(MockitoExtension::class)
class PlaceServiceTest {
    
    @Mock
    private lateinit var placeRepository: PlaceRepository
    
    @Mock  
    private lateinit var auditLogger: AuditLogger
    
    @InjectMocks
    private lateinit var placeService: PlaceService
    
    @Test
    fun `should create place with valid data`() {
        // Given
        val request = CreatePlaceRequest(
            name = "Test Venue",
            description = "Test description",
            latitude = 35.6762,
            longitude = 139.6503
        )
        val expectedPlace = PlaceEntity(/* ... */)
        
        given(placeRepository.save(any())).willReturn(expectedPlace)
        
        // When
        val result = placeService.create("project-code", request)
        
        // Then
        assertThat(result.name).isEqualTo("Test Venue")
        verify(auditLogger).log(
            eventType = "PLACE",
            action = "CREATE ${result.id}",
            entityType = "PLACE", 
            entityId = result.id,
            success = true
        )
    }
}
```

#### í†µí•© í…ŒìŠ¤íŠ¸ (20%)
ì»´í¬ë„ŒíŠ¸ ê°„ ìƒí˜¸ì‘ìš©ê³¼ ì™¸ë¶€ ì˜ì¡´ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤:

```kotlin
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@TestPropertySource(properties = [
    "spring.datasource.url=jdbc:h2:mem:testdb",
    "spring.jpa.hibernate.ddl-auto=create-drop"
])
@Transactional
class PlaceControllerIntegrationTest {
    
    @Autowired
    private lateinit var testRestTemplate: TestRestTemplate
    
    @Autowired 
    private lateinit var placeRepository: PlaceRepository
    
    @Test
    fun `should create place when authenticated as admin`() {
        // Given
        val authToken = generateAdminToken()
        val request = CreatePlaceRequest(/* ... */)
        
        val headers = HttpHeaders().apply {
            setBearerAuth(authToken)
            contentType = MediaType.APPLICATION_JSON
        }
        
        // When
        val response = testRestTemplate.exchange(
            "/api/v1/projects/test-project/places",
            HttpMethod.POST,
            HttpEntity(request, headers),
            object : ParameterizedTypeReference<ApiResponse<PlaceDetailDto>>() {}
        )
        
        // Then
        assertThat(response.statusCode).isEqualTo(HttpStatus.CREATED)
        assertThat(response.body?.success).isTrue()
        assertThat(response.body?.data?.name).isEqualTo(request.name)
        
        val savedPlace = placeRepository.findByName(request.name)
        assertThat(savedPlace).isNotNull()
    }
}
```

#### E2E í…ŒìŠ¤íŠ¸ (10%)
ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ëª¨ì‚¬í•˜ëŠ” ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤:

```kotlin
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@Testcontainers
class PlaceManagementE2ETest {
    
    companion object {
        @Container
        val postgres = PostgreSQLContainer<Nothing>("postgres:15-alpine").apply {
            withDatabaseName("testdb")
            withUsername("test")
            withPassword("test")
        }
        
        @Container
        val redis = GenericContainer<Nothing>("redis:7-alpine").apply {
            withExposedPorts(6379)
        }
    }
    
    @Test
    fun `complete place management workflow`() {
        // 1. Register user
        val registerResponse = registerUser("test@example.com", "TestUser", "password123")
        assertThat(registerResponse.statusCode).isEqualTo(HttpStatus.CREATED)
        
        val accessToken = registerResponse.body?.data?.accessToken!!
        
        // 2. Create place (should fail - not admin)
        val createResponse = createPlace(accessToken, CreatePlaceRequest(/* ... */))
        assertThat(createResponse.statusCode).isEqualTo(HttpStatus.FORBIDDEN)
        
        // 3. Login as admin
        val adminToken = loginAsAdmin()
        
        // 4. Create place (should succeed)
        val placeResponse = createPlace(adminToken, CreatePlaceRequest(/* ... */))
        assertThat(placeResponse.statusCode).isEqualTo(HttpStatus.CREATED)
        
        val placeId = placeResponse.body?.data?.id!!
        
        // 5. Upload photo
        val uploadResponse = uploadPlacePhoto(accessToken, placeId, "test-photo.jpg")
        assertThat(uploadResponse.statusCode).isEqualTo(HttpStatus.OK)
        
        // 6. Add comment  
        val commentResponse = addPlaceComment(accessToken, placeId, "Great venue!")
        assertThat(commentResponse.statusCode).isEqualTo(HttpStatus.CREATED)
        
        // 7. Search for place
        val searchResponse = searchPlaces("venue")
        assertThat(searchResponse.body?.data?.any { it.id == placeId }).isTrue()
    }
}
```

### í…ŒìŠ¤íŠ¸ ë„êµ¬ ë° í”„ë ˆì„ì›Œí¬

#### í•µì‹¬ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **JUnit 5**: ë§¤ê°œë³€ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•˜ëŠ” í˜„ëŒ€ì  í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **AssertJ**: ê°€ë…ì„± í–¥ìƒì„ ìœ„í•œ ìœ ì°½í•œ ë‹¨ì–¸(assertions)
- **Mockito**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ìš© ëª¨í‚¹ í”„ë ˆì„ì›Œí¬
- **TestContainers**: ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ í†µí•© í…ŒìŠ¤íŠ¸
- **WireMock**: ì™¸ë¶€ ì„œë¹„ìŠ¤ ëª¨í‚¹

#### API í…ŒìŠ¤íŠ¸ ë„êµ¬
- **Spring MockMvc**: ì „ì²´ HTTP ì„œë²„ ì—†ì´ ì›¹ ë ˆì´ì–´ í…ŒìŠ¤íŠ¸
- **RestAssured**: ìœ ì°½í•œ DSLì„ í†µí•œ REST API í…ŒìŠ¤íŠ¸
- **WebTestClient**: ë¦¬ì•¡í‹°ë¸Œ ì›¹ í…ŒìŠ¤íŠ¸ (WebFlux ì‚¬ìš© ì‹œ)
- **Testcontainers**: ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ë° Redis ì¸ìŠ¤í„´ìŠ¤

#### RestAssured í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
```kotlin
@TestMethodOrder(OrderAnnotation::class)
class PlaceAPITest : BaseIntegrationTest() {
    
    @Test
    @Order(1)
    fun `should authenticate and get token`() {
        val response = given()
            .contentType(ContentType.JSON)
            .body(LoginRequest("admin@example.com", "admin123"))
        .`when`()
            .post("/api/v1/auth/login")
        .then()
            .statusCode(200)
            .body("success", equalTo(true))
            .body("data.accessToken", notNullValue())
            .extract().response()
            
        accessToken = response.path("data.accessToken")
    }
    
    @Test
    @Order(2)  
    fun `should create place with authentication`() {
        val placeRequest = CreatePlaceRequest(
            name = "Test Live House",
            description = "A test venue",
            latitude = 35.6762,
            longitude = 139.6503,
            address = "Tokyo, Japan",
            tags = listOf("music", "venue"),
            unitIds = listOf("unit-001")
        )
        
        given()
            .header("Authorization", "Bearer $accessToken")
            .contentType(ContentType.JSON)
            .body(placeRequest)
        .`when`()
            .post("/api/v1/projects/test-project/places")
        .then()
            .statusCode(201)
            .body("success", equalTo(true))
            .body("data.name", equalTo("Test Live House"))
            .body("data.latitude", equalTo(35.6762f))
    }
}
```

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### K6 ë¶€í•˜ í…ŒìŠ¤íŠ¸
```javascript
import http from 'k6/http';
import { check } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 100 },  // Ramp up to 100 users
    { duration: '5m', target: 100 },  // Stay at 100 users
    { duration: '2m', target: 0 },    // Ramp down
  ],
  thresholds: {
    http_req_duration: ['p(95)<1000'], // 95% of requests under 1000ms
    http_req_failed: ['rate<0.1'],     // Error rate under 10%
  },
};

export default function() {
  // Login and get token
  const loginResponse = http.post('http://localhost:8080/api/v1/auth/login', 
    JSON.stringify({
      username: 'test@example.com',
      password: 'password123'
    }), {
      headers: { 'Content-Type': 'application/json' }
    }
  );
  
  check(loginResponse, {
    'login status is 200': (r) => r.status === 200,
    'login has token': (r) => JSON.parse(r.body).data.accessToken !== null,
  });
  
  const token = JSON.parse(loginResponse.body).data.accessToken;
  
  // Search places
  const searchResponse = http.get(
    'http://localhost:8080/api/v1/search/places?q=venue',
    {
      headers: { 'Authorization': `Bearer ${token}` }
    }
  );
  
  check(searchResponse, {
    'search status is 200': (r) => r.status === 200,
    'search returns results': (r) => JSON.parse(r.body).data.length > 0,
  });
}
```

#### JMeter ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
```xml
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2">
  <hashTree>
    <TestPlan testname="Girls Band Tabi API Performance Test">
      <elementProp name="arguments" elementType="Arguments"/>
    </TestPlan>
    <hashTree>
      <ThreadGroup testname="API Load Test">
        <stringProp name="ThreadGroup.num_threads">50</stringProp>
        <stringProp name="ThreadGroup.ramp_time">60</stringProp>
        <stringProp name="ThreadGroup.duration">300</stringProp>
      </ThreadGroup>
    </hashTree>
  </hashTree>
</jmeterTestPlan>
```

### ë³´ì•ˆ í…ŒìŠ¤íŠ¸

#### OWASP ZAP í†µí•©
```kotlin
@Test
fun `security scan with ZAP`() {
    val zapClient = ClientApi("localhost", 8080)
    
    // Start spider scan
    zapClient.spider.scan("http://localhost:8080/api/v1/")
    
    // Wait for spider to complete
    while (zapClient.spider.status("0").toInt() < 100) {
        Thread.sleep(1000)
    }
    
    // Start active scan
    zapClient.ascan.scan("http://localhost:8080/api/v1/", "True", "False", "", "", "", "")
    
    // Generate report
    val report = zapClient.core.htmlreport()
    // Assert no high-risk vulnerabilities found
}
```

#### ì¸ì¦ í…ŒìŠ¤íŠ¸
```kotlin
@Test
fun `should reject requests without authentication`() {
    given()
        .contentType(ContentType.JSON)
    .`when`()
        .get("/api/v1/places")
    .then()
        .statusCode(401)
        .body("error.code", equalTo("AUTHENTICATION_REQUIRED"))
}

@Test  
fun `should reject expired tokens`() {
    val expiredToken = generateExpiredToken()
    
    given()
        .header("Authorization", "Bearer $expiredToken")
    .`when`()
        .get("/api/v1/places")
    .then()
        .statusCode(401)
        .body("error.code", equalTo("AUTHENTICATION_FAILED"))
}
```

### í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬

#### í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
```kotlin
@Component
class TestDataBuilder {
    
    fun createTestUser(
        email: String = "test@example.com",
        nickname: String = "TestUser",
        role: UserRole = UserRole.USER
    ): UserEntity {
        return UserEntity(
            id = UUID.randomUUID(),
            email = email,
            nickname = nickname,
            passwordHash = "hashed_password",
            role = role,
            createdAt = Instant.now(),
            updatedAt = Instant.now()
        )
    }
    
    fun createTestPlace(
        projectCode: String = "test-project",
        name: String = "Test Venue"
    ): PlaceEntity {
        return PlaceEntity(
            id = UUID.randomUUID().toString(),
            name = name,
            description = "Test description",
            latitude = 35.6762,
            longitude = 139.6503,
            address = "Tokyo, Japan",
            projectCode = projectCode,
            createdAt = Instant.now(),
            updatedAt = Instant.now()
        )
    }
}
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬
```kotlin
@Component
@Transactional
class TestDatabaseCleaner {
    
    @Autowired
    private lateinit var entityManager: EntityManager
    
    fun cleanDatabase() {
        val tableNames = listOf(
            "place_comments",
            "place_photos", 
            "places",
            "uploads",
            "users"
        )
        
        entityManager.flush()
        entityManager.createNativeQuery("SET REFERENTIAL_INTEGRITY FALSE").executeUpdate()
        
        tableNames.forEach { tableName ->
            entityManager.createNativeQuery("TRUNCATE TABLE $tableName").executeUpdate()
        }
        
        entityManager.createNativeQuery("SET REFERENTIAL_INTEGRITY TRUE").executeUpdate()
    }
}
```

### ì§€ì†ì  í…ŒìŠ¤íŠ¸

#### GitHub Actions CI/CD
```yaml
name: API Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_DB: testdb
          POSTGRES_USER: test
          POSTGRES_PASSWORD: test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      
      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'
      
      - name: Run unit tests
        run: ./gradlew test
      
      - name: Run integration tests
        run: ./gradlew integrationTest
        env:
          SPRING_DATASOURCE_URL: jdbc:postgresql://localhost:5432/testdb
          SPRING_DATASOURCE_USERNAME: test
          SPRING_DATASOURCE_PASSWORD: test
          SPRING_DATA_REDIS_HOST: localhost
      
      - name: Generate test report
        uses: dorny/test-reporter@v1
        if: success() || failure()
        with:
          name: Test Results
          path: build/test-results/**/*.xml
          reporter: java-junit
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
ëª©í‘œ ì»¤ë²„ë¦¬ì§€ ì§€í‘œ:
- **ë¼ì¸ ì»¤ë²„ë¦¬ì§€(Line Coverage)**: >90%
- **ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€(Branch Coverage)**: >85%  
- **ë©”ì„œë“œ ì»¤ë²„ë¦¬ì§€(Method Coverage)**: >95%

```kotlin
// JaCoCo configuration in build.gradle.kts
jacocoTestCoverageVerification {
    violationRules {
        rule {
            limit {
                minimum = "0.90".toBigDecimal()
            }
        }
        rule {
            element = "BRANCH"
            limit {
                minimum = "0.85".toBigDecimal()
            }
        }
    }
}
```

### í…ŒìŠ¤íŠ¸ ëª¨ë²” ì‚¬ë¡€

1. **í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ(Test Pyramid)**: ë‹¨ìœ„ 70%, í†µí•© 20%, E2E 10%
2. **ë¹ ë¥¸ í”¼ë“œë°±(Fast Feedback)**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 5ë¶„ ì´ë‚´ ì‹¤í–‰
3. **ë…ë¦½ëœ í…ŒìŠ¤íŠ¸(Isolated Tests)**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ì´ë©° ìˆœì„œì— ê´€ê³„ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥
4. **ì˜ë¯¸ ìˆëŠ” ì´ë¦„(Meaningful Names)**: í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ëª…í™•íˆ ì„¤ëª…
5. **ë°ì´í„° ì£¼ë„ í…ŒìŠ¤íŠ¸(Data-Driven Tests)**: ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•´ ë§¤ê°œë³€ìˆ˜ í…ŒìŠ¤íŠ¸ ì‚¬ìš©
6. **ì§€ì†ì  í†µí•©(Continuous Integration)**: ëª¨ë“  ì»¤ë°‹ì— ëŒ€í•´ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
7. **í…ŒìŠ¤íŠ¸ ë¬¸ì„œí™”(Test Documentation)**: ë³µì¡í•œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë¬¸ì„œí™”
8. **ì„±ëŠ¥ ê¸°ì¤€ì„ (Performance Baselines)**: ë¡œë“œ í…ŒìŠ¤íŠ¸ë¡œ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì„¤ì •

---

## 2025-11-17 ë³€ê²½ ìš”ì•½
- ì¥ì†Œ ëª©ë¡/ìƒì„¸ ì‘ë‹µì— `introText` í•„ë“œë¥¼ ì¶”ê°€í•´ ì¹´ë“œ UIÂ·SNS ê³µìœ  ë¬¸êµ¬ë¥¼ ì„œë²„ì—ì„œ ì§ì ‘ ì œê³µí•˜ë„ë¡ í‘œì¤€í™”í–ˆìŠµë‹ˆë‹¤.
- `regionSummary` ê°ì²´(code, primaryName, path, level)ë¥¼ ëª¨ë“  ì¥ì†Œ ì‘ë‹µì— í¬í•¨í•´ í”„ëŸ°íŠ¸ì—”ë“œê°€ ì¶”ê°€ API í˜¸ì¶œ ì—†ì´ ì§€ì—­ ì •ë ¬Â·ê·¸ë£¹í•‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë‹¨ì¼ `type` í•„ë“œë¥¼ ì œê±°í•˜ê³  `types` ë°°ì—´ë§Œ ìœ ì§€í•˜ì—¬ ë‹¤ì¤‘ ë¶„ë¥˜ ê³„ì•½ì„ ë‹¨ìˆœí™”í–ˆìŠµë‹ˆë‹¤. Admin APIëŠ” ìë™ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µí•´ ìµœì†Œ 1ê°œì˜ íƒ€ì…ì„ ë³´ì¥í•©ë‹ˆë‹¤.
- Admin ìƒì„±/ìˆ˜ì • ìš”ì²­ ë³¸ë¬¸ì—ì„œ `introText`(ì„ íƒ)ë¥¼ ì§€ì›í•˜ë©°, ë¹„ì–´ ìˆì„ ê²½ìš° ì„œë²„ê°€ `description` ì•ë¶€ë¶„(ìµœëŒ€ 200ì)ìœ¼ë¡œ ìë™ ì±„ì›Œ ì´ˆê¸° ìš´ì˜ ë¶€ë‹´ì„ ì¤„ì˜€ìŠµë‹ˆë‹¤.

## ê²°ë¡ 

ì´ í¬ê´„ì ì¸ API ë¬¸ì„œëŠ” ê°œë°œìë“¤ì´ Girls Band Tabi APIì™€ ì„±ê³µì ìœ¼ë¡œ í†µí•©í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤. RESTful ì„¤ê³„ ì›ì¹™, í¬ê´„ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬, ê²¬ê³ í•œ ë³´ì•ˆ, ê´‘ë²”ìœ„í•œ í…ŒìŠ¤íŠ¸ì˜ ì¡°í•©ì€ ì‹ ë¢°í•  ìˆ˜ ìˆê³  ê°œë°œì ì¹œí™”ì ì¸ ê²½í—˜ì„ ë³´ì¥í•©ë‹ˆë‹¤.

ì¶”ê°€ ì§€ì›(Additional Support):
- **API ì§€ì›(API Support)**: api-support@girlsbandtabi.com
- **ë¬¸ì„œ(Documentation)**: https://docs.girlsbandtabi.com  
- **ìƒíƒœ í˜ì´ì§€(Status Page)**: https://status.girlsbandtabi.com
- **GitHub Issues**: https://github.com/girlsbandtabi/api/issues

APIëŠ” ê°œë°œì í”¼ë“œë°±ê³¼ ì‚¬ìš© íŒ¨í„´ì„ ë°”íƒ•ìœ¼ë¡œ ì§€ì†ì ìœ¼ë¡œ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìµœì‹  ì—…ë°ì´íŠ¸ì™€ ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•œ ë‚´ìš©ì€ ë³€ê²½ë¡œê·¸ì™€ ë²„ì „ ë…¸íŠ¸ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.
