# ë³´ì•ˆ ê°€ì´ë“œ v1.0.0 ğŸ›¡ï¸
**Girls Band Tabi - ë³´ì•ˆ ì•„í‚¤í…ì²˜ ë¬¸ì„œ**

**ìµœì‹  ì—…ë°ì´íŠ¸**: 2025ë…„ 11ì›” 13ì¼  
**ë²„ì „**: v1.0.0  
**ìƒíƒœ**: âœ… ìµœì‹   
**ì‘ì„±**: ë³´ì•ˆ ì—”ì§€ë‹ˆì–´ë§ íŒ€  

## ëª©ì°¨

1. [ë³´ì•ˆ ì•„í‚¤í…ì²˜ ê°œìš”](#ë³´ì•ˆ-ì•„í‚¤í…ì²˜-ê°œìš”)
2. [ìœ„í˜‘ ëª¨ë¸](#ìœ„í˜‘-ëª¨ë¸)
3. [ì¸ì¦ ë° ê¶Œí•œë¶€ì—¬](#ì¸ì¦-ë°-ê¶Œí•œë¶€ì—¬)
4. [ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ ë° ì‹œí¬ë¦¿ ê´€ë¦¬](#ë¹„ë°€ë²ˆí˜¸-ë³´ì•ˆ-ë°-ì‹œí¬ë¦¿-ê´€ë¦¬)
5. [API ë³´ì•ˆ íŒ¨í„´](#api-ë³´ì•ˆ-íŒ¨í„´)
6. [ì†ë„ ì œí•œ ë° DDoS ë³´í˜¸](#ì†ë„-ì œí•œ-ë°-ddos-ë³´í˜¸)
7. [ë°ì´í„° ë³´í˜¸ ë° ê°œì¸ì •ë³´ ë³´í˜¸](#ë°ì´í„°-ë³´í˜¸-ë°-ê°œì¸ì •ë³´-ë³´í˜¸)
8. [ë³´ì•ˆ í—¤ë” ë° CORS êµ¬ì„±](#ë³´ì•ˆ-í—¤ë”-ë°-cors-êµ¬ì„±)
9. [ê°ì‚¬ ë¡œê¹… ë° ë³´ì•ˆ ëª¨ë‹ˆí„°ë§](#ê°ì‚¬-ë¡œê¹…-ë°-ë³´ì•ˆ-ëª¨ë‹ˆí„°ë§)
10. [ë°°í¬ ë³´ì•ˆ](#ë°°í¬-ë³´ì•ˆ)
11. [ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ë° ì·¨ì•½ì  í‰ê°€](#ë³´ì•ˆ-í…ŒìŠ¤íŠ¸-ë°-ì·¨ì•½ì -í‰ê°€)
12. [ì‚¬ê³  ëŒ€ì‘ ì ˆì°¨](#ì‚¬ê³ -ëŒ€ì‘-ì ˆì°¨)
13. [êµ¬í˜„ ì˜ˆì œ](#êµ¬í˜„-ì˜ˆì œ)
14. [ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸](#ë³´ì•ˆ-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## ë³´ì•ˆ ì•„í‚¤í…ì²˜ ê°œìš”

### ìƒìœ„ ìˆ˜ì¤€ ì•„í‚¤í…ì²˜

Girls Band Tabi ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì—¬ëŸ¬ ê³„ì¸µì„ ê°€ì§„ ì‹¬ì¸µ ë°©ì–´ ë³´ì•ˆ ì „ëµì„ êµ¬í˜„í•©ë‹ˆë‹¤:

![ë³´ì•ˆ ì•„í‚¤í…ì²˜ ê°œìš”](https://mermaid.ink/img/eyJjb2RlIjogImdyYXBoIExSXG4gICAgQ2xpZW50W1x1ZDA3NFx1Yjc3Y1x1Yzc3NFx1YzViOFx1ZDJiOF0gLS0-IENETltDRE4vV0FGXVxuICAgIENETiAtLT4gTEJbXHViODVjXHViNGRjIFx1YmMzOFx1YjdmMFx1YzExY11cbiAgICBMQiAtLT4gR2F0ZXdheVtBUEkgXHVhYzhjXHVjNzc0XHVkMmI4XHVjNmU4XHVjNzc0XVxuICAgIEdhdGV3YXkgLS0-IFNlY3VyaXR5W1NwcmluZyBTZWN1cml0eSBcdWQ1NDRcdWQxMzBdXG4gICAgU2VjdXJpdHkgLS0-IEFwcFtcdWM1NjBcdWQ1MGNcdWI5YWNcdWNmMDBcdWM3NzRcdWMxNTggXHVhY2M0XHVjZTM1XVxuICAgIEFwcCAtLT4gREJbXHViMzcwXHVjNzc0XHVkMTMwXHViY2EwXHVjNzc0XHVjMmE0XSIsICJtZXJtYWlkIjogeyJ0aGVtZSI6ICJkZWZhdWx0In19)

<details>
<summary>Mermaid ì›ë³¸ ì½”ë“œ ë³´ê¸°</summary>

```mermaid
graph LR
    Client[í´ë¼ì´ì–¸íŠ¸] --> CDN[CDN/WAF]
    CDN --> LB[ë¡œë“œ ë°¸ëŸ°ì„œ]
    LB --> Gateway[API ê²Œì´íŠ¸ì›¨ì´]
    Gateway --> Security[Spring Security í•„í„°]
    Security --> App[ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ]
    App --> DB[ë°ì´í„°ë² ì´ìŠ¤]
```
</details>

**ë³´ì•ˆ ê³„ì¸µ:**

1. **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**: DDoS ë³´í˜¸ ê¸°ëŠ¥ì„ í¬í•¨í•œ Cloudflare CDN
2. **ì „ì†¡ ë³´ì•ˆ**: ëª¨ë“  í†µì‹ ì— ëŒ€í•œ TLS 1.3 ì•”í˜¸í™”
3. **ì¸ì¦/ê¶Œí•œë¶€ì—¬**: í”„ë¡œì íŠ¸ ìˆ˜ì¤€ RBACë¥¼ í¬í•¨í•œ JWT ê¸°ë°˜ ë¬´ìƒíƒœ ì¸ì¦
4. **ì…ë ¥ ê²€ì¦**: ì‚¬ìš©ì ì •ì˜ ì •í™” ê¸°ëŠ¥ì„ í¬í•¨í•œ Bean Validation (JSR-380)
5. **ì†ë„ ì œí•œ**: Redis ê¸°ë°˜ ë¶„ì‚° ì†ë„ ì œí•œ
6. **ê°ì‚¬ ë¡œê¹…**: í¬ê´„ì ì¸ ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹…
7. **ë°ì´í„° ë³´í˜¸**: ì ì ˆí•œ í‚¤ ê´€ë¦¬ë¥¼ í†µí•œ ë¯¼ê°í•œ ë°ì´í„° ì•”í˜¸í™”

### í•µì‹¬ ë³´ì•ˆ ì›ì¹™

1. **ì œë¡œ íŠ¸ëŸ¬ìŠ¤íŠ¸ ì•„í‚¤í…ì²˜**: ì ˆëŒ€ ì‹ ë¢°í•˜ì§€ ì•Šê³ , í•­ìƒ ê²€ì¦
2. **ì‹¬ì¸µ ë°©ì–´**: ë‹¤ì¤‘ ë³´ì•ˆ ê³„ì¸µ
3. **ìµœì†Œ ê¶Œí•œ ì›ì¹™**: í•„ìš”í•œ ìµœì†Œí•œì˜ ì ‘ê·¼ ê¶Œí•œ
4. **ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì•ˆ**: ê¸°ë³¸ì ìœ¼ë¡œ í™œì„±í™”ëœ ë³´ì•ˆ ê¸°ëŠ¥
5. **ì•ˆì „í•œ ì‹¤íŒ¨**: ë³´ì•ˆì„ ìœ ì§€í•˜ë©´ì„œ ìš°ì•„í•œ ì„±ëŠ¥ ì €í•˜

---

## ìœ„í˜‘ ëª¨ë¸

### ì£¼ìš” ìœ„í˜‘

| ìœ„í˜‘ | ì˜í–¥ë„ | ê°€ëŠ¥ì„± | ì™„í™” ë°©ë²• |
|-----|--------|--------|----------|
| **ì¸ì¦ ìš°íšŒ** | ë†’ìŒ | ì¤‘ê°„ | JWT ì„œëª… ê²€ì¦, ì§§ì€ í† í° ë§Œë£Œ ì‹œê°„ |
| **SQL ì¸ì ì…˜** | ë†’ìŒ | ë‚®ìŒ | ë§¤ê°œë³€ìˆ˜í™”ëœ ì¿¼ë¦¬, JPA/R2DBC |
| **XSS/CSRF** | ì¤‘ê°„ | ì¤‘ê°„ | CSP í—¤ë”, SameSite ì¿ í‚¤ |
| **DDoS ê³µê²©** | ì¤‘ê°„ | ë†’ìŒ | ì†ë„ ì œí•œ, Cloudflare ë³´í˜¸ |
| **ë°ì´í„° ìœ ì¶œ** | ë†’ìŒ | ë‚®ìŒ | ì €ì¥/ì „ì†¡ ì•”í˜¸í™”, ì ‘ê·¼ ì œì–´ |
| **ê¶Œí•œ ìƒìŠ¹** | ë†’ìŒ | ë‚®ìŒ | RBAC, ë©”ì†Œë“œ ìˆ˜ì¤€ ë³´ì•ˆ |
| **ì„¸ì…˜ ê³ ì •** | ì¤‘ê°„ | ë‚®ìŒ | ë¬´ìƒíƒœ JWT í† í° |
| **ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©** | ì¤‘ê°„ | ì¤‘ê°„ | ê³„ì • ì ê¸ˆ, ì†ë„ ì œí•œ |

### ê³µê²© ë²¡í„°

1. **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜**: REST APIë¥¼ í†µí•œ ì£¼ìš” ê³µê²© í‘œë©´
2. **ì¸ì¦**: JWT í† í° íƒˆì·¨ ë˜ëŠ” ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©
3. **ë°ì´í„° ê³„ì¸µ**: SQL ì¸ì ì…˜ ë˜ëŠ” ë¬´ë‹¨ ë°ì´í„° ì ‘ê·¼
4. **ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜**: ì»¨í…Œì´ë„ˆ íƒˆì¶œ ë˜ëŠ” ì˜ëª»ëœ êµ¬ì„±
5. **ê³µê¸‰ë§**: ì¢…ì†ì„± ì·¨ì•½ì 

### ì‹ ë¢° ê²½ê³„

- **ê³µìš© ì¸í„°ë„· â†” CDN/WAF**: ì‹ ë¢°í•  ìˆ˜ ì—†ìŒì—ì„œ ë°˜ì‹ ë¢°ë¡œ
- **CDN/WAF â†” ì• í”Œë¦¬ì¼€ì´ì…˜**: ë°˜ì‹ ë¢°ì—ì„œ ì‹ ë¢°ë¡œ
- **ì• í”Œë¦¬ì¼€ì´ì…˜ â†” ë°ì´í„°ë² ì´ìŠ¤**: ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë‚´ë¶€ í†µì‹ 
- **ì• í”Œë¦¬ì¼€ì´ì…˜ â†” ì™¸ë¶€ API**: ì‹ ë¢°í•˜ì§€ë§Œ ê²€ì¦ë¨

---

## ì¸ì¦ ë° ê¶Œí•œë¶€ì—¬

### JWT í† í° ì‹œìŠ¤í…œ

**ì•„í‚¤í…ì²˜:**
```kotlin
// Token Structure
{
  "header": {
    "alg": "HS256",
    "typ": "JWT"
  },
  "payload": {
    "sub": "user_id",
    "iss": "girlsbandtabi",
    "iat": 1699123456,
    "exp": 1699127056,
    "roles": ["USER"],
    "token_type": "access"
  }
}
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­:**

1. **í† í° ìœ í˜•:**
   - Access Token: 15ë¶„ ìˆ˜ëª…, ì‚¬ìš©ì ì—­í•  í¬í•¨
   - Refresh Token: 7ì¼ ìˆ˜ëª…, í† í° ê°±ì‹ ìš©
   - Location Token: JWE ì•”í˜¸í™”ëœ ìœ„ì¹˜ í´ë ˆì„

2. **ë³´ì•ˆ ê¸°ëŠ¥:**
   - êµ¬ì„± ê°€ëŠ¥í•œ ë¹„ë°€í‚¤ë¡œ HMAC-SHA256 ì„œëª…
   - ì§§ì€ ë§Œë£Œ ì‹œê°„ ìœˆë„ìš°
   - ìë™ í† í° ê°±ì‹  ë©”ì»¤ë‹ˆì¦˜
   - ë¦¬í”„ë ˆì‹œ í† í° ìˆœí™˜ (ì„ íƒì‚¬í•­)

### í”„ë¡œì íŠ¸ ìˆ˜ì¤€ ê¶Œí•œë¶€ì—¬

**ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC):**

```kotlin
// Project roles hierarchy
enum class ProjectRole {
    ADMIN,    // Full project management
    MODERATOR, // Content moderation
    MEMBER,   // Basic participation
    VIEWER    // Read-only access
}
```

**êµ¬í˜„:**
```kotlin
@PreAuthorize("@projectAuth.isProjectAdmin(#projectCode)")
@PostMapping("/api/v1/projects/{projectCode}/admin")
fun adminAction(@PathVariable projectCode: String) {
    // Only project admins can access
}
```

### ë³´ì•ˆ ì–´ë…¸í…Œì´ì…˜

**ë©”ì†Œë“œ ë³´ì•ˆ:**
```kotlin
// Global role-based security
@PreAuthorize("hasRole('ADMIN')")
fun globalAdminAction() {}

// Project-specific security
@PreAuthorize("@projectAuth.isProjectAdmin(#projectId)")
fun projectAdminAction(@PathVariable projectId: String) {}

// Custom security expressions
@PreAuthorize("@securityService.canAccessResource(authentication.name, #resourceId)")
fun resourceAccess(@PathVariable resourceId: String) {}
```

### í˜„ì¬ ì‚¬ìš©ì í•´ì„

**ë³´ì•ˆ ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸:**
```kotlin
@Component
class CurrentUserResolver {
    fun authentication(): Authentication? = SecurityContextHolder.getContext().authentication
    
    fun optionalSubject(): String? = authentication()?.name
    
    fun optionalUserId(): UUID? = /* Extract from JWT claims */
    
    fun requiresSubject(): String = optionalSubject() 
        ?: throw SecurityException("Authentication required")
}
```

---

## ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ ë° ì‹œí¬ë¦¿ ê´€ë¦¬

### í–¥ìƒëœ ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ

**PepperBCryptPasswordEncoder êµ¬í˜„:**

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ì¸µ ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **ê¸€ë¡œë²Œ í˜í¼(Pepper)**: BCrypt ì „ì— ì ìš©ë˜ëŠ” HMAC-SHA256 ê¸°ë°˜ í˜í¼
2. **BCrypt í•´ì‹±**: êµ¬ì„± ê°€ëŠ¥í•œ ë¼ìš´ë“œ ìˆ˜ (ê¸°ë³¸ê°’: 12)
3. **ìë™ ì—…ê·¸ë ˆì´ë“œ**: ë¡œê·¸ì¸ ì‹œ ë ˆê±°ì‹œ ë¹„ë°€ë²ˆí˜¸ ì—…ê·¸ë ˆì´ë“œ
4. **ë³´ì•ˆ ê²€ì¦**: ìƒìˆ˜ ì‹œê°„ ë¹„êµ

**êµ¬ì„±:**
```yaml
app:
  security:
    password:
      pepper: ${PASSWORD_PEPPER:__UNSAFE_DEFAULT__}
      bcrypt-strength: ${PASSWORD_BCRYPT_STRENGTH:12}
      pepper-enabled: ${PASSWORD_PEPPER_ENABLED:true}
```

**ë³´ì•ˆ ê¸°ëŠ¥:**
- ê¸€ë¡œë²Œ í˜í¼ë¥¼ í†µí•œ ë ˆì¸ë³´ìš° í…Œì´ë¸” ê³µê²© ë°©ì§€
- ë¯¸ë˜ ëŒ€ë¹„ë¥¼ ìœ„í•œ êµ¬ì„± ê°€ëŠ¥í•œ BCrypt ê°•ë„
- í˜í¼ê°€ ì—†ëŠ” ë¹„ë°€ë²ˆí˜¸ì™€ì˜ í•˜ìœ„ í˜¸í™˜ì„±
- ë¡œê·¸ì¸ ì‹œ ìë™ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ì—…ê·¸ë ˆì´ë“œ

### ì‹œí¬ë¦¿ ê´€ë¦¬

**ì‹œí¬ë¦¿ ê²€ì¦:**
```kotlin
@Component
class SecretValidationRunner : ApplicationRunner {
    override fun run(args: ApplicationArguments) {
        validateSecrets()
    }
    
    private fun validateSecrets() {
        if (isProductionProfile() && isUnsafeDefault(jwtSecret)) {
            throw SecurityException("JWT secret must be configured for production")
        }
    }
}
```

**í™˜ê²½ë³„ ì‹œí¬ë¦¿:**
- **ê°œë°œ**: ê¸°ë³¸ ì‹œí¬ë¦¿ìœ¼ë¡œ ì™„í™”ëœ ê²€ì¦
- **í”„ë¡œë•ì…˜**: í•„ìˆ˜ ì‹œí¬ë¦¿ ê²€ì¦, ê¸°ë³¸ê°’ì—ì„œ ë¹ ë¥¸ ì‹¤íŒ¨
- **ì‹œí¬ë¦¿ ì†ŒìŠ¤**: í™˜ê²½ ë³€ìˆ˜, Vault, Kubernetes ì‹œí¬ë¦¿

**ëª¨ë²” ì‚¬ë¡€:**
1. ë²„ì „ ê´€ë¦¬ì— ì‹œí¬ë¦¿ì„ ì ˆëŒ€ ì»¤ë°‹í•˜ì§€ ì•Šê¸°
2. í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ì‹œí¬ë¦¿ ì‚¬ìš©
3. ì‹œí¬ë¦¿ì„ ì •ê¸°ì ìœ¼ë¡œ ìˆœí™˜
4. ì‹œí¬ë¦¿ ì ‘ê·¼ ë° ì‚¬ìš© ëª¨ë‹ˆí„°ë§
5. ì‹œí¬ë¦¿ ê´€ë¦¬ ë„êµ¬ ì‚¬ìš© (HashiCorp Vault, AWS Secrets Manager)

---

## API ë³´ì•ˆ íŒ¨í„´

### ì…ë ¥ ê²€ì¦

**Bean Validation (JSR-380):**
```kotlin
data class CreateProjectRequest(
    @field:NotBlank
    @field:Size(min = 2, max = 100)
    val name: String,
    
    @field:Pattern(regexp = "^[a-z0-9-]+$")
    val slug: String,
    
    @field:Valid
    val settings: ProjectSettings?
)
```

**Custom Validation:**
```kotlin
@Component
class InputSanitizer {
    fun sanitizeHtml(input: String): String {
        return Jsoup.clean(input, Safelist.basicWithImages())
    }
    
    fun validateAndSanitize(input: String): String {
        require(input.length <= 10000) { "Input too long" }
        return sanitizeHtml(input)
    }
}
```

### ë³´ì•ˆ í—¤ë”

**Comprehensive Security Headers:**
```kotlin
.headers { headers ->
    headers
        .frameOptions { it.deny() }                    // X-Frame-Options: DENY
        .contentTypeOptions { }                        // X-Content-Type-Options: nosniff
        .xssProtection { }                             // X-XSS-Protection: 1; mode=block
        .httpStrictTransportSecurity { hsts ->
            hsts.includeSubDomains(true)
                .maxAgeInSeconds(31536000)             // HSTS: 1 year
        }
}
```

### CORS êµ¬ì„±

**Secure CORS Setup:**
```kotlin
@Bean
fun corsConfigurationSource(): CorsConfigurationSource {
    val configuration = CorsConfiguration().apply {
        allowedOrigins = allowedOriginsList                // Whitelist specific origins
        allowedMethods = listOf("GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS")
        allowedHeaders = listOf("Authorization", "Content-Type", "Accept", "Origin", "X-Requested-With")
        exposedHeaders = listOf("Authorization", "Content-Type")
        allowCredentials = true                            // Enable credential sharing
        maxAge = 3600L                                     // Cache preflight for 1 hour
    }
    
    val source = UrlBasedCorsConfigurationSource()
    source.registerCorsConfiguration("/**", configuration)
    return source
}
```

### API ë²„ì „ë³„ ë³´ì•ˆ

**Version-Aware Security:**
```kotlin
// Different security rules per API version
.requestMatchers("/api/v1/**").hasRole("USER")
.requestMatchers("/api/v2/**").hasRole("VERIFIED_USER")
.requestMatchers("/api/admin/**").hasRole("ADMIN")
```

---

## ì†ë„ ì œí•œ ë° DDoS ë°©ì–´

### Redis ê¸°ë°˜ ì†ë„ ì œí•œ

**ë‹¤ë‹¨ê³„ ì†ë„ ì œí•œ:**

1. **Global IP Limits**: 1000 requests/hour per IP
2. **API Endpoint Limits**: 100 requests/minute per IP per endpoint  
3. **Authentication Limits**: 5 login attempts per 15 minutes
4. **User-Specific Limits**: Per-user action quotas

**êµ¬í˜„:**
```kotlin
@Component
@ConditionalOnProperty(prefix = "redis-features.rate-limiting", name = ["enabled"], havingValue = "true")
class RateLimitInterceptor(
    private val rateLimitRedisService: RateLimitRedisService,
    private val redisFeatureProperties: RedisFeatureProperties
) : HandlerInterceptor {
    
    override fun preHandle(request: HttpServletRequest, response: HttpServletResponse, handler: Any): Boolean {
        val clientIp = getClientIp(request)
        val requestUri = request.requestURI
        
        // Check if IP is blocked
        if (rateLimitRedisService.isIpBlocked(clientIp)) {
            response.status = HttpStatus.TOO_MANY_REQUESTS.value()
            response.writer.write("""{"error": "IP blocked due to rate limit violation"}""")
            return false
        }
        
        // Check global IP rate limit
        if (!rateLimitRedisService.checkIpRateLimit(
                clientIp,
                redisFeatureProperties.rateLimiting.globalIpLimit,
                redisFeatureProperties.rateLimiting.globalIpWindowHours
            )) {
            response.status = HttpStatus.TOO_MANY_REQUESTS.value()
            response.writer.write("""{"error": "Global IP rate limit exceeded"}""")
            return false
        }
        
        // Add rate limit headers
        addRateLimitHeaders(response, clientIp, requestUri)
        return true
    }
}
```

### DDoS ë³´í˜¸ ì „ëµ

**3/4ê³„ì¸µ ë³´í˜¸:**
- Cloudflare DDoS ë³´í˜¸ (ìµœëŒ€ 100 Gbps)
- ìë™ íŠ¸ë˜í”½ í•„í„°ë§
- ì§€ì—­ ì°¨ë‹¨ ê¸°ëŠ¥

**7ê³„ì¸µ ë³´í˜¸:**
- IP/ì—”ë“œí¬ì¸íŠ¸ë³„ ì†ë„ ì œí•œ
- ë°˜ë³µ ê°€í•´ìì— ëŒ€í•œ ì ì§„ì  ì§€ì—°
- ì˜ì‹¬ìŠ¤ëŸ¬ìš´ íŠ¸ë˜í”½ì— ëŒ€í•œ CAPTCHA ì±Œë¦°ì§€
- ì—°ê²° ì œí•œ

**Configuration:**
```yaml
redis-features:
  rate-limiting:
    enabled: true
    global-ip-limit: 1000
    global-ip-window-hours: 1
    api-limit: 100
    api-window-minutes: 1
    login-attempt-limit: 5
    login-window-minutes: 15
```

---

## ë°ì´í„° ë³´í˜¸ ë° í”„ë¼ì´ë²„ì‹œ

### ì €ì¥ ë°ì´í„° ì•”í˜¸í™”

**ë°ì´í„°ë² ì´ìŠ¤ ì•”í˜¸í™”:**
- PostgreSQL TDE (íˆ¬ëª… ë°ì´í„° ì•”í˜¸í™”)
- ë¯¼ê°í•œ í•„ë“œì— ëŒ€í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜ì¤€ ì•”í˜¸í™”
- ì•”í˜¸í™”ëœ ë°±ì—…

**íŒŒì¼ ì €ì¥ì†Œ ì•”í˜¸í™”:**
- Cloudflare R2 ì„œë²„ ì¸¡ ì•”í˜¸í™”
- ë¯¼ê°í•œ íŒŒì¼ì— ëŒ€í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì•”í˜¸í™”
- ì•”í˜¸í™”ëœ ì„ì‹œ íŒŒì¼ ì²˜ë¦¬

### ì „ì†¡ ë°ì´í„° ì•”í˜¸í™”

**TLS êµ¬ì„±:**
- TLS 1.3 ìµœì†Œ ë²„ì „
- ì™„ì „ ìˆœë°©í–¥ ë¹„ë°€ì„± (PFS)
- includeSubDomainsì™€ í•¨ê»˜ HSTS í—¤ë”
- ì¸ì¦ì„œ í”¼ë‹ (ëª¨ë°”ì¼ ì•±)

### ë°ì´í„° ìµœì†Œí™”

**í”„ë¼ì´ë²„ì‹œ ë°”ì´ ë””ìì¸:**
```kotlin
@Entity
data class UserEntity(
    val id: UUID,
    val username: String,
    val email: String,                    // Encrypted in database
    val passwordHash: String,             // BCrypt + pepper
    val lastLoginAt: OffsetDateTime?,
    val createdAt: OffsetDateTime = OffsetDateTime.now()
    // Note: No storage of unnecessary PII
)
```

**ë°ì´í„° ë³´ì¡´:**
- ë§Œë£Œëœ í† í°ì˜ ìë™ ì‚­ì œ
- ê³„ì • ì‚­ì œ í›„ ì‚¬ìš©ì ë°ì´í„° ì •ë¦¬
- ê°ì‚¬ ë¡œê·¸ ë³´ì¡´ ì •ì±…
- GDPR ì¤€ìˆ˜ ë©”ì»¤ë‹ˆì¦˜

### ê°œì¸ì •ë³´ ì²˜ë¦¬

**GDPR ì¤€ìˆ˜:**
1. **ì ‘ê·¼ê¶Œ**: ì‚¬ìš©ì ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥
2. **ì •ì •ê¶Œ**: í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ë©”ì»¤ë‹ˆì¦˜
3. **ì‚­ì œê¶Œ**: ë°ì´í„° ì •ë¦¬ì™€ í•¨ê»˜ ê³„ì • ì‚­ì œ
4. **ë°ì´í„° ì´ë™ì„±**: JSON ë‚´ë³´ë‚´ê¸° í˜•ì‹
5. **ë™ì˜ ê´€ë¦¬**: ì„¸ë¶„í™”ëœ ê°œì¸ì •ë³´ ì„¤ì •

---

## ë³´ì•ˆ í—¤ë” ë° CORS êµ¬ì„±

### ë³´ì•ˆ í—¤ë” êµ¬í˜„

**ì™„ì „í•œ í—¤ë” ë³´ì•ˆ:**
```kotlin
// In SecurityConfig.kt
.headers { headers ->
    headers
        .frameOptions { frame -> 
            frame.deny()                                    // Prevent clickjacking
        }
        .contentTypeOptions { }                             // Prevent MIME type sniffing
        .xssProtection { }                                  // Enable XSS filtering
        .httpStrictTransportSecurity { hsts ->
            hsts.includeSubDomains(true)
                .maxAgeInSeconds(31536000)                  // 1 year HSTS
        }
        .addHeaderWriter { request, response ->
            // Content Security Policy
            response.setHeader("Content-Security-Policy", 
                "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'")
            
            // Additional security headers
            response.setHeader("X-Permitted-Cross-Domain-Policies", "none")
            response.setHeader("Referrer-Policy", "strict-origin-when-cross-origin")
            response.setHeader("Permissions-Policy", "camera=(), microphone=(), geolocation=(self)")
        }
}
```

### ì¿ í‚¤ ë³´ì•ˆ

**í–¥ìƒëœ ì¿ í‚¤ êµ¬ì„±:**
```yaml
app:
  security:
    cookie:
      secure: true                    # HTTPS only
      http-only: true                 # Prevent JavaScript access
      same-site: Lax                  # CSRF protection
      max-age: -1                     # Session cookies
      domain-pattern: ""              # Specific domain binding
      
      jwt:
        enabled: false                # JWT cookies disabled by default
        same-site: Strict             # Stricter for auth tokens
        http-only: true               # Essential for security
```

**ì¿ í‚¤ ë³´ì•ˆ í•„í„°:**
```kotlin
@Component
class CookieSecurityFilter : Filter {
    override fun doFilter(request: ServletRequest, response: ServletResponse, chain: FilterChain) {
        val wrapper = SecureCookieResponseWrapper(response as HttpServletResponse)
        chain.doFilter(request, wrapper)
    }
}

class SecureCookieResponseWrapper(response: HttpServletResponse) : HttpServletResponseWrapper(response) {
    override fun addCookie(cookie: Cookie) {
        cookie.secure = isSecureProfile()
        cookie.isHttpOnly = true
        cookie.path = cookie.path ?: "/"
        super.addCookie(cookie)
    }
}
```

### CORS ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€

**ë³´ì•ˆ CORS êµ¬ì„±:**
1. **íŠ¹ì • ì˜¤ë¦¬ì§„**: í”„ë¡œë•ì…˜ì—ì„œ ì™€ì¼ë“œì¹´ë“œ(*) í”¼í•˜ê¸°
2. **ìê²©ì¦ëª… ì²˜ë¦¬**: allowCredentials ì‹ ì¤‘í•˜ê²Œ í™œì„±í™”
3. **í—¤ë” ì œí•œ**: í—ˆìš©/ë…¸ì¶œ í—¤ë” ì œí•œ
4. **ë©”ì†Œë“œ ì œí•œ**: í•„ìš”í•œ HTTP ë©”ì†Œë“œë§Œ í—ˆìš©
5. **í”„ë¦¬í”Œë¼ì´íŠ¸ ìºì‹±**: ì ì ˆí•œ maxAgeë¡œ ìµœì í™”

---

## ê°ì‚¬ ë¡œê¹… ë° ë³´ì•ˆ ëª¨ë‹ˆí„°ë§

### êµ¬ì¡°í™”ëœ ë¡œê¹… ì‹œìŠ¤í…œ

**ë‹¤ë‹¨ê³„ ë¡œê¹…:**
```kotlin
@Service
class StructuredLogger {
    fun logSecurityEvent(
        eventType: SecurityEventType,
        description: String,
        userId: String? = null,
        ipAddress: String? = null,
        userAgent: String? = null,
        details: Map<String, Any> = emptyMap()
    ) {
        val securityEvent = SecurityEvent(
            timestamp = OffsetDateTime.now(),
            eventType = eventType.name,
            description = description,
            userId = userId,
            ipAddress = ipAddress,
            userAgent = userAgent,
            traceId = MDC.get("traceId"),
            details = details
        )
        
        securityLogger.info(objectMapper.writeValueAsString(securityEvent))
    }
}
```

**ë³´ì•ˆ ì´ë²¤íŠ¸ ìœ í˜•:**
```kotlin
enum class SecurityEventType {
    LOGIN_SUCCESS,
    LOGIN_FAILURE,
    LOGOUT,
    ACCESS_DENIED,
    RATE_LIMIT_EXCEEDED,
    SUSPICIOUS_ACTIVITY,
    TOKEN_VALIDATION_FAILURE,
    CSRF_ATTACK_DETECTED,
    SQL_INJECTION_ATTEMPT,
    XSS_ATTEMPT,
    FILE_UPLOAD_REJECTED
}
```

### ê°ì‚¬ ì¶”ì  êµ¬í˜„

**ë°ì´í„°ë² ì´ìŠ¤ ê°ì‚¬ ë¡œê¹…:**
```kotlin
@Service
class AuditLogger {
    fun log(
        eventType: String,
        action: String,
        entityType: String? = null,
        entityId: String? = null,
        success: Boolean = true,
        failureReason: String? = null,
        responseStatus: Int? = null
    ) {
        val entity = AuditLogEntity(
            eventType = eventType,
            entityType = entityType,
            entityId = entityId,
            actorType = determineActorType(),
            actorId = currentUserResolver.optionalUserId(),
            subjectId = currentUserResolver.optionalSubject(),
            requestId = getRequestId(),
            ipAddress = getClientIp(),
            userAgent = getUserAgent(),
            action = action,
            resourcePath = getRequestURI(),
            responseStatus = responseStatus,
            success = success,
            failureReason = failureReason,
            createdAt = OffsetDateTime.now()
        )
        auditLogRepository.save(entity)
    }
}
```

### ìš”ì²­ ìƒê´€ê´€ê³„ ë° ì¶”ì 

**ìƒê´€ê´€ê³„ ID í•„í„°:**
```kotlin
@Component
@Order(Ordered.HIGHEST_PRECEDENCE)
class LoggingFilter : Filter {
    override fun doFilter(request: ServletRequest, response: ServletResponse, chain: FilterChain) {
        val httpRequest = request as HttpServletRequest
        val httpResponse = response as HttpServletResponse
        
        val requestId = UUID.randomUUID().toString()
        val startTime = System.currentTimeMillis()
        
        try {
            // Set MDC context
            MDC.put("requestId", requestId)
            MDC.put("method", httpRequest.method)
            MDC.put("uri", httpRequest.requestURI)
            MDC.put("userAgent", httpRequest.getHeader("User-Agent") ?: "unknown")
            MDC.put("remoteAddr", getClientIpAddress(httpRequest))
            
            // Add correlation ID header
            httpRequest.getHeader("X-Correlation-ID")?.let { correlationId ->
                MDC.put("correlationId", correlationId)
                httpResponse.setHeader("X-Correlation-ID", correlationId)
            } ?: run {
                httpResponse.setHeader("X-Correlation-ID", requestId)
            }
            
            chain.doFilter(request, response)
        } finally {
            logRequestCompletion(httpRequest, httpResponse, startTime)
            MDC.clear()
        }
    }
}
```

### ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼

**ì‹¤ì‹œê°„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§:**

1. **ì¸ì¦ ì‹¤íŒ¨ íŒ¨í„´**:
   - ë™ì¼ IPì—ì„œ ì—¬ëŸ¬ ë²ˆ ë¡œê·¸ì¸ ì‹¤íŒ¨
   - ê³„ì • ì—´ê±° ì‹œë„
   - ìê²©ì¦ëª… ìŠ¤í„°í•‘ íƒì§€

2. **ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™ íƒì§€**:
   - ë¹„ì •ìƒì ì¸ ì ‘ê·¼ íŒ¨í„´
   - ê¶Œí•œ ìƒìŠ¹ ì‹œë„
   - ë°ì´í„° ìœ ì¶œ ì§€í‘œ

3. **ì†ë„ ì œí•œ ìœ„ë°˜**:
   - IP ê¸°ë°˜ ì†ë„ ì œí•œ ìœ„ë°˜
   - ì‚¬ìš©ìë³„ í• ë‹¹ëŸ‰ ì´ˆê³¼
   - API ë‚¨ìš© íŒ¨í„´

4. **ë³´ì•ˆ í—¤ë” ìœ„ë°˜**:
   - CSP ì •ì±… ìœ„ë°˜
   - CORS ì •ì±… ìœ„ë°˜
   - ë³´ì•ˆ í—¤ë” ëˆ„ë½

---

## ë°°í¬ ë³´ì•ˆ

### í™˜ê²½ êµ¬ì„±

**í™˜ê²½ë³„ ì‹œí¬ë¦¿ ê´€ë¦¬:**

**ê°œë°œ:**
```yaml
# application-local.yml
app:
  security:
    password:
      pepper: "__DEV_PEPPER__"    # Relaxed for development
jwt:
  secret: "__DEV_JWT_SECRET__"    # Simple secret for local testing
```

**í”„ë¡œë•ì…˜:**
```yaml
# application-prod.yml
app:
  security:
    password:
      pepper: ${PASSWORD_PEPPER}              # Must be provided via environment
      bcrypt-strength: 14                     # Higher strength for production
jwt:
  secret: ${JWT_SECRET}                       # Must be provided via environment
  access-token-expiration: 900                # 15 minutes
  refresh-token-expiration: 604800            # 7 days
```

**ì‹œí¬ë¦¿ ê²€ì¦:**
```kotlin
@Component
class SecretValidationRunner : ApplicationRunner {
    override fun run(args: ApplicationArguments) {
        if (!isLocalEnvironment() && isUnsafeSecret()) {
            throw SecurityException("Production deployment with unsafe defaults detected")
        }
    }
}
```

### ì»¨í…Œì´ë„ˆ ë³´ì•ˆ

**Dockerfile ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€:**
```dockerfile
# íŠ¹ì • ë²„ì „ íƒœê·¸ ì‚¬ìš©
FROM openjdk:17-jre-slim@sha256:specific-hash

# ë¹„ë£¨íŠ¸ ì‚¬ìš©ì ìƒì„±
RUN addgroup --system app && adduser --system --group app

# ë³´ì•ˆ ê¶Œí•œ ì„¤ì •
COPY --chown=app:app target/app.jar app.jar

# ë¹„ë£¨íŠ¸ë¡œ ì‹¤í–‰
USER app

# í—¬ìŠ¤ ì²´í¬
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:8080/actuator/health || exit 1

# ë³´ì•ˆ ì‹œì‘
ENTRYPOINT ["java", "-XX:+UnlockExperimentalVMOptions", "-XX:+UseContainerSupport", "-jar", "app.jar"]
```

### ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ë³´ì•ˆ

**ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ:**
- í”„ë¼ì´ë¹— ì„œë¸Œë„·ì´ ìˆëŠ” VPC
- ìµœì†Œ ì ‘ê·¼ ê¶Œí•œì„ ê°€ì§„ ë³´ì•ˆ ê·¸ë£¹
- ì¶”ê°€ í•„í„°ë§ì„ ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ACL
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´í˜¸ë¥¼ ìœ„í•œ WAF ê·œì¹™

**ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ:**
- ì•”í˜¸í™”ëœ ì—°ê²° (SSL/TLS)
- ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì¤€ ì•”í˜¸í™”
- ì •ê¸°ì ì¸ ë³´ì•ˆ íŒ¨ì¹˜
- ë°±ì—… ì•”í˜¸í™”

**ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼:**
- CloudWatch/Prometheus ë©”íŠ¸ë¦­
- ë¡œê·¸ ì§‘ê³„ (ELK ìŠ¤íƒ)
- ë³´ì•ˆ ì´ë²¤íŠ¸ ìƒê´€ê´€ê³„ ë¶„ì„
- ìë™í™”ëœ ì‚¬ê³  ëŒ€ì‘

---

## ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ë° ì·¨ì•½ì  í‰ê°€

### ìë™í™”ëœ ë³´ì•ˆ í…ŒìŠ¤íŠ¸

**ì •ì  ì½”ë“œ ë¶„ì„:**
```bash
# Detekt ë³´ì•ˆ ê·œì¹™
./gradlew detekt

# OWASP ì¢…ì†ì„± ê²€ì‚¬
./gradlew dependencyCheck

# SpotBugs ë³´ì•ˆ ë²„ê·¸
./gradlew spotbugsMain
```

**ë™ì  ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ í…ŒìŠ¤íŠ¸ (DAST):**
```bash
# OWASP ZAP ìë™í™”
zap-baseline.py -t http://localhost:8080 -g gen.conf

# ì‚¬ìš©ì ì •ì˜ ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸
./gradlew securityTest
```

### ëª¨ì˜ í•´í‚¹ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì¸ì¦ í…ŒìŠ¤íŠ¸:**
- [ ] JWT í† í° ì¡°ì‘
- [ ] ì„¸ì…˜ ê³ ì • ì‹œë„
- [ ] ë¹„ë°€ë²ˆí˜¸ ë¬´ì°¨ë³„ ëŒ€ì… ì €í•­ì„±
- [ ] ë‹¤ë‹¨ê³„ ì¸ì¦ ìš°íšŒ
- [ ] OAuth í”Œë¡œìš° ë³´ì•ˆ

**ê¶Œí•œë¶€ì—¬ í…ŒìŠ¤íŠ¸:**
- [ ] ìˆ˜í‰ì  ê¶Œí•œ ìƒìŠ¹
- [ ] ìˆ˜ì§ì  ê¶Œí•œ ìƒìŠ¹  
- [ ] ì§ì ‘ ê°ì²´ ì°¸ì¡° ì·¨ì•½ì 
- [ ] ë©”ì†Œë“œ ìˆ˜ì¤€ ë³´ì•ˆ ìš°íšŒ
- [ ] í”„ë¡œì íŠ¸ë³„ ì ‘ê·¼ ì œì–´

**ì…ë ¥ ê²€ì¦ í…ŒìŠ¤íŠ¸:**
- [ ] SQL ì¸ì ì…˜ ì‹œë„
- [ ] XSS í˜ì´ë¡œë“œ ì£¼ì…
- [ ] ëª…ë ¹ ì¸ì ì…˜ í…ŒìŠ¤íŠ¸
- [ ] ê²½ë¡œ ìˆœíšŒ ì‹œë„
- [ ] íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ

**API ë³´ì•ˆ í…ŒìŠ¤íŠ¸:**
- [ ] ì†ë„ ì œí•œ íš¨ê³¼ì„±
- [ ] CORS ì •ì±… ê²€ì¦
- [ ] ë³´ì•ˆ í—¤ë” ì¡´ì¬
- [ ] ì˜¤ë¥˜ ë©”ì‹œì§€ ì •ë³´ ëˆ„ì¶œ
- [ ] API ë²„ì „ë³„ ë³´ì•ˆ

### ì·¨ì•½ì  ê´€ë¦¬

**ë³´ì•ˆ íŒ¨ì¹˜ ê´€ë¦¬:**
1. **ì¢…ì†ì„± ìŠ¤ìº”**: ìë™í™”ëœ ì¼ì¼ ìŠ¤ìº”
2. **CVE ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ì·¨ì•½ì  í”¼ë“œ
3. **íŒ¨ì¹˜ ìš°ì„ ìˆœìœ„**: CVSS ì ìˆ˜ ê¸°ë°˜ ë¶„ë¥˜
4. **í…ŒìŠ¤íŠ¸ íŒŒì´í”„ë¼ì¸**: ìë™í™”ëœ ë³´ì•ˆ íšŒê·€ í…ŒìŠ¤íŠ¸
5. **ë°°í¬**: ì¡°ì •ëœ íŒ¨ì¹˜ ë¡¤ì•„ì›ƒ

**ë³´ì•ˆ ë©”íŠ¸ë¦­:**
- í‰ê·  íƒì§€ ì‹œê°„ (MTTD)
- í‰ê·  ëŒ€ì‘ ì‹œê°„ (MTTR)
- ì·¨ì•½ì  ë…¸ì¶œ ìœˆë„ìš°
- ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë°±ë¶„ìœ¨
- ê±°ì§“ ì–‘ì„±/ìŒì„± ë¹„ìœ¨

---

## ì‚¬ê³  ëŒ€ì‘ ì ˆì°¨

### ë³´ì•ˆ ì‚¬ê³  ë¶„ë¥˜

**ì‹¬ê°ë„ ìˆ˜ì¤€:**

| Level | Description | Response Time | Escalation |
|-------|-------------|---------------|------------|
| **Critical** | Active data breach, system compromise | 15 minutes | CTO, CISO |
| **High** | Authentication bypass, privilege escalation | 1 hour | Security Lead |
| **Medium** | Rate limit violations, failed attacks | 4 hours | Dev Team |
| **Low** | Policy violations, suspicious activity | 24 hours | Monitoring |

### ì‚¬ê³  ëŒ€ì‘ í”Œë ˆì´ë¶

**ë°ì´í„° ìœ ì¶œ ëŒ€ì‘:**
1. **ì¦‰ì‹œ ëŒ€ì‘ (0-15ë¶„)**:
   - ì˜í–¥ë°›ì€ ì‹œìŠ¤í…œ ê²©ë¦¬
   - ì¦ê±° ë° ë¡œê·¸ ë³´ì¡´
   - ì¹¨í•´ ë²”ìœ„ í‰ê°€
   - ì‚¬ê³  ì§€íœ˜ê´€ì—ê²Œ ì•Œë¦¼

2. **ë‹¨ê¸° ëŒ€ì‘ (15ë¶„ - 1ì‹œê°„)**:
   - ë´‰ì‡„ ì¡°ì¹˜ êµ¬í˜„
   - ì•…ì„± IP/ê³„ì • ì°¨ë‹¨
   - ì¹¨í•´ëœ ìê²©ì¦ëª… ìˆœí™˜
   - ì‚¬ê³  íƒ€ì„ë¼ì¸ ë¬¸ì„œí™”

3. **ì¤‘ê¸° ëŒ€ì‘ (1-24ì‹œê°„)**:
   - í¬ë Œì‹ ë¶„ì„ ìˆ˜í–‰
   - ë°ì´í„° ë…¸ì¶œ ë²”ìœ„ í‰ê°€
   - ê³ ê° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì¤€ë¹„
   - ì¶”ê°€ ëª¨ë‹ˆí„°ë§ êµ¬í˜„

4. **ì¥ê¸° ëŒ€ì‘ (24ì‹œê°„ ì´ìƒ)**:
   - ì‚¬ê³  ì¡°ì‚¬ ì™„ë£Œ
   - ë³´ì•ˆ í†µì œ ì—…ë°ì´íŠ¸
   - êµí›ˆ í•™ìŠµ ì„¸ì…˜ ìˆ˜í–‰
   - í•„ìš”ì‹œ ê·œì œ ì‹ ê³ 

### ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ í…œí”Œë¦¿

**ë³´ì•ˆ ì•Œë¦¼ í…œí”Œë¦¿:**
```
SECURITY ALERT - [SEVERITY]

Incident ID: SEC-2024-001
Detection Time: 2024-11-12 14:30:00 UTC
Alert Source: [WAF/IDS/Manual]

Description:
[Brief description of security event]

Affected Systems:
- [List of impacted systems/services]

Actions Taken:
- [Immediate containment measures]

Next Steps:
- [Planned response activities]

Contact: security@girlsbandtabi.com
```

### í¬ë Œì‹ ë° ì¦ê±° ìˆ˜ì§‘

**ë””ì§€í„¸ ì¦ê±° ì²˜ë¦¬:**
1. **ë¡œê·¸ ìˆ˜ì§‘**: ë¶ˆë³€ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹…
2. **ë©”ëª¨ë¦¬ ë¤í”„**: ì‹œìŠ¤í…œ ìƒíƒœ ë³´ì¡´
3. **ë„¤íŠ¸ì›Œí¬ ìº¡ì²˜**: íŠ¸ë˜í”½ ë¶„ì„ ê¸°ëŠ¥
4. **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤ëƒ…ìƒ·**: íŠ¹ì • ì‹œì  ë³µêµ¬ ì˜µì…˜
5. **ì¦ê±° ê´€ë¦¬ ì—°ì†ì„±**: ë¬¸ì„œí™”ëœ ì¦ê±° ì²˜ë¦¬

**ì¤€ìˆ˜ ë³´ê³ :**
- GDPR ì¹¨í•´ ì‹ ê³  (72ì‹œê°„)
- PCI DSS ì‚¬ê³  ë³´ê³ 
- SOC 2 ì‚¬ê³  ë¬¸ì„œí™”
- ê³ ê° ì•Œë¦¼ ì ˆì°¨

---

## êµ¬í˜„ ì˜ˆì‹œ

### ë³´ì•ˆ ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„

```kotlin
@RestController
@RequestMapping("/api/v1/projects")
@PreAuthorize("isAuthenticated()")
class ProjectController(
    private val projectService: ProjectService,
    private val auditLogger: AuditLogger,
    private val structuredLogger: StructuredLogger
) {
    
    @PostMapping
    @PreAuthorize("hasRole('USER')")
    fun createProject(@Valid @RequestBody request: CreateProjectRequest): ProjectResponse {
        val startTime = System.currentTimeMillis()
        return try {
            val project = projectService.createProject(request)
            
            auditLogger.log(
                eventType = "PROJECT",
                action = "CREATE",
                entityType = "Project",
                entityId = project.id.toString(),
                success = true
            )
            
            structuredLogger.logBusinessEvent(
                eventType = "PROJECT_CREATED",
                description = "New project created: ${project.name}",
                metadata = mapOf("projectId" to project.id.toString())
            )
            
            project.toResponse()
        } catch (e: Exception) {
            structuredLogger.logSecurityEvent(
                eventType = SecurityEventType.SUSPICIOUS_ACTIVITY,
                description = "Project creation failed: ${e.message}",
                details = mapOf("error" to e.javaClass.simpleName)
            )
            throw e
        } finally {
            val duration = System.currentTimeMillis() - startTime
            structuredLogger.logPerformanceMetric("create_project", duration, true)
        }
    }
    
    @PutMapping("/{projectId}")
    @PreAuthorize("@projectAuth.isProjectAdmin(#projectId)")
    fun updateProject(
        @PathVariable projectId: String,
        @Valid @RequestBody request: UpdateProjectRequest
    ): ProjectResponse {
        // Implementation with similar security patterns
    }
}
```

### ë³´ì•ˆ ì„œë¹„ìŠ¤ êµ¬í˜„

```kotlin
@Service
@Transactional
class ProjectService(
    private val projectRepository: ProjectRepository,
    private val currentUserResolver: CurrentUserResolver,
    private val inputSanitizer: InputSanitizer
) {
    
    fun createProject(request: CreateProjectRequest): Project {
        // Input validation and sanitization
        val sanitizedName = inputSanitizer.sanitizeHtml(request.name)
        val sanitizedDescription = request.description?.let { 
            inputSanitizer.sanitizeHtml(it) 
        }
        
        // Authorization check
        val currentUser = currentUserResolver.requiresSubject()
        
        // Business logic with security controls
        val project = Project(
            name = sanitizedName,
            description = sanitizedDescription,
            slug = generateSecureSlug(request.slug),
            ownerId = currentUserResolver.requiresUserId(),
            createdBy = currentUser
        )
        
        return projectRepository.save(project)
    }
    
    private fun generateSecureSlug(proposedSlug: String): String {
        // Ensure slug meets security requirements
        val sanitized = proposedSlug.lowercase()
            .replace(Regex("[^a-z0-9-]"), "")
            .take(50)
            
        if (sanitized.length < 2) {
            throw ValidationException("Slug must be at least 2 characters")
        }
        
        return sanitized
    }
}
```

### ë³´ì•ˆ ì´ë²¤íŠ¸ ì²˜ë¦¬

```kotlin
@Component
class SecurityEventHandler {
    
    @EventListener
    fun handleAuthenticationFailure(event: AuthenticationFailureBadCredentialsEvent) {
        structuredLogger.logSecurityEvent(
            eventType = SecurityEventType.LOGIN_FAILURE,
            description = "Authentication failed for user: ${event.authentication.name}",
            userId = event.authentication.name,
            ipAddress = getClientIp(),
            userAgent = getUserAgent(),
            details = mapOf("reason" to "bad_credentials")
        )
        
        // Implement account lockout logic
        authenticationAttemptService.recordFailure(event.authentication.name, getClientIp())
    }
    
    @EventListener
    fun handleAccessDenied(event: AuthorizationDeniedEvent) {
        structuredLogger.logSecurityEvent(
            eventType = SecurityEventType.ACCESS_DENIED,
            description = "Access denied to resource: ${event.resource}",
            userId = event.authentication.name,
            details = mapOf(
                "resource" to event.resource,
                "requiredAuthority" to event.requiredAuthority
            )
        )
    }
}
```

---

## ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì¸ì¦ ë° ê¶Œí•œë¶€ì—¬:**
- [ ] JWT í† í° ì ì ˆí•œ ê²€ì¦
- [ ] í† í° ë§Œë£Œ ì‹œê°„ ì ì ˆí•œ êµ¬ì„±
- [ ] ë¦¬í”„ë ˆì‹œ í† í° ìˆœí™˜ êµ¬í˜„
- [ ] ë©”ì†Œë“œ ìˆ˜ì¤€ ë³´ì•ˆ ì–´ë…¸í…Œì´ì…˜ ì ìš©
- [ ] í”„ë¡œì íŠ¸ ìˆ˜ì¤€ ê¶Œí•œë¶€ì—¬ êµ¬í˜„
- [ ] í˜„ì¬ ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ ì ì ˆí•œ í•´ì„

**ì…ë ¥ ê²€ì¦:**
- [ ] ëª¨ë“  ì…ë ¥ DTOì— Bean Validation ì–´ë…¸í…Œì´ì…˜
- [ ] ì‚¬ìš©ì ì½˜í…ì¸  HTML ì •í™”
- [ ] SQL ì¸ì ì…˜ ë°©ì§€ (ë§¤ê°œë³€ìˆ˜í™”ëœ ì¿¼ë¦¬)
- [ ] ê²½ë¡œ ìˆœíšŒ ë°©ì§€
- [ ] íŒŒì¼ ì—…ë¡œë“œ ê²€ì¦
- [ ] ìš”ì²­ í¬ê¸° ì œí•œ ê°•ì œ

**ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ:**
- [ ] ì ì ˆí•œ ê°•ë„ì˜ BCrypt (â‰¥12)
- [ ] ê¸€ë¡œë²Œ í˜í¼ êµ¬í˜„
- [ ] ë¹„ë°€ë²ˆí˜¸ ì—…ê·¸ë ˆì´ë“œ ë©”ì»¤ë‹ˆì¦˜
- [ ] ì‹¤íŒ¨ ì‹œë„ í›„ ê³„ì • ì ê¸ˆ
- [ ] ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì •ì±…

**API ë³´ì•ˆ:**
- [ ] ì†ë„ ì œí•œ êµ¬ì„±
- [ ] CORS ì •ì±… ì ì ˆí•œ ì œí•œ
- [ ] ë³´ì•ˆ í—¤ë” êµ¬í˜„
- [ ] ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì •ë³´ ëˆ„ì¶œí•˜ì§€ ì•ŠìŒ
- [ ] API ë²„ì „ë³„ ë³´ì•ˆ ì ìš©
- [ ] ê°ì‚¬ìš© ìš”ì²­/ì‘ë‹µ ë¡œê¹…

### ë°°í¬ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

**í™˜ê²½ êµ¬ì„±:**
- [ ] í”„ë¡œë•ì…˜ ì‹œí¬ë¦¿ ì ì ˆí•œ êµ¬ì„±
- [ ] ê¸°ë³¸/ì•ˆì „í•˜ì§€ ì•Šì€ ì‹œí¬ë¦¿ ê²€ì¦
- [ ] í™˜ê²½ë³„ êµ¬ì„±
- [ ] ì‹œí¬ë¦¿ ìˆœí™˜ ì ˆì°¨ ë¬¸ì„œí™”
- [ ] ì‹œí¬ë¦¿ ì ‘ê·¼ ì ì ˆí•œ ì œí•œ

**ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ ë³´ì•ˆ:**
- [ ] TLS 1.3 êµ¬ì„±
- [ ] ì¸ì¦ì„œ ê²€ì¦
- [ ] ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ê·¸ë£¹ êµ¬ì„±
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì•”í˜¸í™” í™œì„±í™”
- [ ] ë°±ì—… ì•”í˜¸í™” í™œì„±í™”
- [ ] ì»¨í…Œì´ë„ˆ ë¹„ë£¨íŠ¸ë¡œ ì‹¤í–‰

**ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…:**
- [ ] ë³´ì•ˆ ì´ë²¤íŠ¸ ë¡œê¹… í™œì„±í™”
- [ ] ê°ì‚¬ ì¶”ì  êµ¬í˜„
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] ì˜¤ë¥˜ ì¶”ì  êµ¬ì„±
- [ ] ë³´ì•ˆ ì•Œë¦¼ êµ¬ì„±
- [ ] ì‚¬ê³  ëŒ€ì‘ ì ˆì°¨ ë¬¸ì„œí™”

### í”„ë¡œë•ì…˜ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ë³´ì•ˆ êµ¬ì„±:**
- [ ] ëª¨ë“  ë³´ì•ˆ ê¸°ëŠ¥ í™œì„±í™”
- [ ] í”„ë¡œë•ì…˜ ë¡œë“œì— ë§ëŠ” ì†ë„ ì œí•œ êµ¬ì„±
- [ ] CORS ì •ì±… ì¶©ë¶„íˆ ì œí•œì 
- [ ] ë³´ì•ˆ í—¤ë” ì ì ˆí•œ êµ¬ì„±
- [ ] ì¿ í‚¤ ë³´ì•ˆ ì„¤ì • ì ìš©
- [ ] JWT êµ¬ì„± ê°•í™”

**ìš´ì˜ ë³´ì•ˆ:**
- [ ] ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ ì•Œë¦¼ êµ¬ì„±
- [ ] ë¡œê·¸ ì§‘ê³„ ì„¤ì •
- [ ] ì‚¬ê³  ëŒ€ì‘ íŒ€ ì‹ë³„
- [ ] ë°±ì—… ë° ë³µêµ¬ ì ˆì°¨ í…ŒìŠ¤íŠ¸
- [ ] ëª¨ì˜ í•´í‚¹ ì™„ë£Œ
- [ ] ì·¨ì•½ì  í‰ê°€ ìˆ˜í–‰

**ì¤€ìˆ˜ ë° ë¬¸ì„œí™”:**
- [ ] ë³´ì•ˆ ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] ê°œì¸ì •ë³´ ì •ì±… ê²€í† 
- [ ] ì„œë¹„ìŠ¤ ì•½ê´€ì— ë³´ì•ˆ ì¡°í•­ í¬í•¨
- [ ] ë°ì´í„° ë³´ì¡´ ì •ì±… êµ¬í˜„
- [ ] GDPR ì¤€ìˆ˜ í™•ì¸
- [ ] ë³´ì•ˆ êµìœ¡ ì™„ë£Œ

---

## ê²°ë¡ 

ì´ ë³´ì•ˆ ë¬¸ì„œëŠ” Girls Band Tabi ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ íƒœì„¸ë¥¼ ìœ ì§€í•˜ê³  í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ í¬ê´„ì ì¸ ì§€ì¹¨ì„ ì œê³µí•©ë‹ˆë‹¤. ì§„í™”í•˜ëŠ” ìœ„í˜‘ì— ëŒ€ì‘í•˜ê³  ê°•ë ¥í•œ ë³´í˜¸ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ëŸ¬í•œ ë³´ì•ˆ ì¡°ì¹˜ì˜ ì •ê¸°ì ì¸ ê²€í† ì™€ ì—…ë°ì´íŠ¸ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.

ì§ˆë¬¸ì´ë‚˜ ë³´ì•ˆ ë¬¸ì œê°€ ìˆìœ¼ì‹œë©´ security@girlsbandtabi.comìœ¼ë¡œ ë³´ì•ˆíŒ€ì— ë¬¸ì˜í•˜ì„¸ìš”.

**ìµœì¢… ì—…ë°ì´íŠ¸:** 2025-11-13  
**ë‹¤ìŒ ê²€í† :** 2026-02-13  
**ë¬¸ì„œ ë‹´ë‹¹ì:** ë³´ì•ˆ ì—”ì§€ë‹ˆì–´ë§ íŒ€